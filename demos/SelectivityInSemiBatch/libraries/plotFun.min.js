function functionToArray(t,i){let e,a,s,n;e=i[0],s=i[1],n=i[2],a=new Array(0),4==i.length?plotRangeInc=i[3]:plotRangeInc=(n-s)/200;try{if(2!=arguments.length||"object"!=typeof arguments[1]||arguments[1].length<3||arguments[1].length>4)throw"two input arguments: 1.) a single-variate function and 2.) a 3-dimensional array for the independent variable and its respective plot range."}catch(t){console.log("function toPlot() requires "+t+" e.g. functionToArray('x + 2x + 6', [x, 0, 100])")}var r;for(r=s;r<=n;r+=plotRangeInc)a.push([r,math.eval(t.replace(new RegExp(e,"g"),String(r.toPrecision(16))))]);return a}function arrayToPlot(t,e,a){let s=new Array(0);for(void 0===a&&(a=.7),curveTightness(a),noFill(),beginShape(),s.push(e.mainLayer.valueToPlot(t[0][0],t[0][1])),curveVertex.apply(this,s[0]),i=0;i<t.length;i++)s.push(e.mainLayer.valueToPlot(t[i][0],t[i][1])),curveVertex.apply(this,s[i+1]);s.push(e.mainLayer.valueToPlot(t[t.length-1][0],t[t.length-1][1])),curveVertex.apply(this,s[s.length-1]),s.push(e.mainLayer.valueToPlot(t[t.length-1][0],t[t.length-1][1])),curveVertex.apply(this,s[s.length-1]),endShape()}function plotFunction(t,i,e,a){let s,n,r,h,L,l=[];var o;for(s=i[0],n=i[1],r=i[2],h=void 0===i[3]?(r-n)/200:i[3],e=arguments[2],void 0===a&&(a=.7),L=functionToArray(t,[s,n,r,h]),curveTightness(a),noFill(),beginShape(),o=0;o<L.length;o++)l.push(e.mainLayer.valueToPlot(L[o][0],L[o][1])),curveVertex.apply(this,l[o]);endShape()}var graphFontSize,x;class PlotCanvas{constructor(t){this.parent=t,this.GPLOT=new GPlot(this.parent),this.pos=[10,0],this.dims=[this.GPLOT.parent.width,this.GPLOT.parent.height],this.xLims=[0,1],this.yLims=[0,1],this.xAxisLabel="x - label",this.yAxisLabel="y - label",this.plotTitle="Plot Title",this.funcs=new Array(0),this.fontSize=18,this.titleFontSize=18,this.axisFontSize=18,this.axisLabelSize=18,this.GPLOT.yAxis.setRotateTickLabels(!1),this.GPLOT.yAxis.setTickLabelOffset(10),this.GPLOT.yAxis.lab.setOffset(50),this.GPLOT.xAxis.lab.setOffset(40)}addFuncs(){let t=0;for(t=0;t<arguments.length;t++)this.funcs.push(arguments[t])}plotDraw(){let t=0;for(this.GPLOT.beginDraw(),this.GPLOT.drawBackground(),this.GPLOT.drawBox(),this.GPLOT.drawGridLines(2),t=0;t<this.funcs.length;t++)stroke(this.funcs[t].lineColor),strokeWeight(this.funcs[t].lineThickness),arrayToPlot(this.funcs[t].arr,this.GPLOT,this.funcs[t].tightness);this.GPLOT.drawLimits(),this.GPLOT.drawXAxis(),this.GPLOT.drawYAxis(),this.GPLOT.drawTitle(),this.GPLOT.endDraw()}plotSetup(){this.GPLOT.setFontSize(this.fontSize),this.GPLOT.getXAxis().fontSize=this.axisFontSize,this.GPLOT.getYAxis().fontSize=this.axisFontSize,this.GPLOT.getXAxis().lab.fontSize=this.axisLabelSize,this.GPLOT.getYAxis().lab.fontSize=this.axisLabelSize,this.GPLOT.getTitle().fontSize=this.titleFontSize,this.GPLOT.setPos.apply(this.GPLOT,this.pos),this.GPLOT.setOuterDim.apply(this.GPLOT,this.dims),this.GPLOT.setXLim.apply(this.GPLOT,this.xLims),this.GPLOT.setYLim.apply(this.GPLOT,this.yLims),this.GPLOT.getXAxis().getAxisLabel().setText(this.xAxisLabel),this.GPLOT.getYAxis().getAxisLabel().setText(this.yAxisLabel),this.GPLOT.getTitle().setText(this.plotTitle)}labelDraw(t,i,e,a,s,n,r){let h=CENTER,L=CENTER;s&&(h=s[0],L=s[1]);let l=this.fontSize;if(n)switch(n){case"sub":case"super":l=.8*this.fontSize}if(r){let t=this.GPLOT.getScreenPosAtValue(i,e);push(),fill(this.GPLOT.boxBgColor.levels[0],this.GPLOT.boxBgColor.levels[1],this.GPLOT.boxBgColor.levels[2],a.levels[3]),noStroke(),rectMode(CENTER),rect(t[0],t[1],l*r[0],l*r[1]),pop()}this.GPLOT.getMainLayer().fontColor=a,this.GPLOT.getMainLayer().fontSize=l,this.GPLOT.beginDraw(),this.GPLOT.drawAnnotation(t,i,e,h,L),this.GPLOT.endDraw()}subSuperDraw(t,i,e,a,s,n,r,h,L){let l,o,T,P=this.GPLOT.mainLayer.valueToXPlot(e),O=this.GPLOT.mainLayer.valueToYPlot(a);l=h||0,o=L||0,T="sub"==n?this.GPLOT.mainLayer.parent.TOP:this.GPLOT.mainLayer.parent.BOTTOM,this.GPLOT.beginDraw(),this.GPLOT.mainLayer.parent.textAlign(this.GPLOT.mainLayer.parent.RIGHT,this.GPLOT.mainLayer.parent.CENTER),this.GPLOT.mainLayer.parent.translate(P+l,O+o),this.GPLOT.mainLayer.parent.rotate(r),this.GPLOT.mainLayer.parent.textFont(this.GPLOT.mainLayer.fontName),this.GPLOT.mainLayer.parent.textSize(this.fontSize),this.GPLOT.mainLayer.parent.fill(s),this.GPLOT.mainLayer.parent.text(t,0,0),this.GPLOT.endDraw(),this.GPLOT.beginDraw(),this.GPLOT.mainLayer.parent.textAlign(this.GPLOT.mainLayer.parent.LEFT,T),this.GPLOT.mainLayer.parent.translate(P+l,O+o),this.GPLOT.mainLayer.parent.rotate(r),this.GPLOT.mainLayer.parent.textFont(this.GPLOT.mainLayer.fontName),this.GPLOT.mainLayer.parent.textSize(.8*this.fontSize),this.GPLOT.mainLayer.parent.fill(s),this.GPLOT.mainLayer.parent.text(i,0,0),this.GPLOT.endDraw()}yaxisSubSuperDraw(t,i,e,a,s,n,r){let h,L,l;h=e||0,L=a||0,l="sub"==n?this.GPLOT.mainLayer.parent.TOP:this.GPLOT.mainLayer.parent.BOTTOM,this.GPLOT.beginDraw(),this.GPLOT.mainLayer.parent.textAlign(this.GPLOT.mainLayer.parent.RIGHT,this.GPLOT.mainLayer.parent.BOTTOM),this.GPLOT.mainLayer.parent.translate(-this.GPLOT.yAxis.lab.offset,this.GPLOT.yAxis.lab.plotPos),this.GPLOT.mainLayer.parent.rotate(r),this.GPLOT.mainLayer.parent.translate(this.fontSize*L,0),this.GPLOT.mainLayer.parent.textFont(this.GPLOT.mainLayer.fontName),this.GPLOT.mainLayer.parent.textSize(this.fontSize),this.GPLOT.mainLayer.parent.fill(s),this.GPLOT.mainLayer.parent.text(t,0,0),this.GPLOT.endDraw(),this.GPLOT.beginDraw(),this.GPLOT.mainLayer.parent.textAlign(this.GPLOT.mainLayer.parent.LEFT,this.GPLOT.mainLayer.parent.CENTER),this.GPLOT.mainLayer.parent.translate(-this.GPLOT.yAxis.lab.offset,this.GPLOT.yAxis.lab.plotPos),this.GPLOT.mainLayer.parent.rotate(r),this.GPLOT.mainLayer.parent.translate(this.fontSize*L,0),this.GPLOT.mainLayer.parent.textFont(this.GPLOT.mainLayer.fontName),this.GPLOT.mainLayer.parent.textSize(.8*this.fontSize),this.GPLOT.mainLayer.parent.fill(s),this.GPLOT.mainLayer.parent.text(i,0,0),this.GPLOT.endDraw()}drawLine(t,i,e,a,s,n,r,h){let L,l,o=this.GPLOT.mainLayer.valueToXPlot(t)-e/2+r,T=this.GPLOT.mainLayer.valueToYPlot(i)-a/2+h,P=o+e/2,O=T+a/2;L=s||color(0,0,0,255),l=n||2,this.GPLOT.beginDraw(),this.GPLOT.mainLayer.parent.stroke(L),this.GPLOT.mainLayer.parent.strokeWeight(l),this.GPLOT.mainLayer.parent.line(o,T,P,O),this.GPLOT.endDraw()}drawRect(t,i,e,a,s){let n,r=this.GPLOT.mainLayer.valueToXPlot(t),h=this.GPLOT.mainLayer.valueToYPlot(i);this.GPLOT.beginDraw(),this.GPLOT.mainLayer.parent.noStroke(),"number"==typeof s&&s<=1&&s>=0?(n=[this.GPLOT.boxBgColor.levels[0],this.GPLOT.boxBgColor.levels[1],this.GPLOT.boxBgColor.levels[2],255*s],this.GPLOT.mainLayer.parent.fill.apply(this,n)):s?(n=s,this.GPLOT.mainLayer.parent.fill(n)):(n=[100,100,100,255],this.GPLOT.mainLayer.parent.fill.apply(this,n)),this.GPLOT.mainLayer.parent.rectMode(this.GPLOT.mainLayer.parent.CENTER),this.GPLOT.mainLayer.parent.rect(r,h,e,a),this.GPLOT.endDraw()}}class Plot{constructor(t,i,e,a,s){this.func=t,this.indep=i,this.min=e,this.max=a,this.resolution=void 0===s?(this.max-this.min)/200:s,this.lineColor=color(0,0,0),this.lineThickness=2,this.arr=functionToArray(this.func,[this.indep,this.min,this.max,this.resolution]),this.tightness=.7}update(t){this.func=t,this.arr=functionToArray(this.func,[this.indep,this.min,this.max,this.resolution])}}class ArrayPlot{constructor(t){this.min=t[0][1],this.max=t[t.length-1][1],this.lineColor=color(0,0,0),this.lineThickness=2,this.tightness=.7,this.arr=t}update(t){this.arr=t}}