function overText(t,n){return`\\mathrel{\\stackrel{${n}}{${t}}}`}function updateData(){function t(t,n,i,o,e){const a=10-u*(t/e)*(n/e)**2*e-c*(t/e)*(n/e)*e;return a}function n(t,n,i,o,e){const a=-e*(u*(t/e)*(n/e)**2+c*(t/e)*(n/e));return a}function i(t,n,i,o,e){const a=u*(t/e)*(n/e)**2*e;return a}function o(t,n,i,o,e){const a=c*(t/e)*(n/e)*e;return a}function e(t,n,i,o,e){const a=1;return a}const a=.008314,l=Math.exp(-Ed/(a*T)),r=Math.exp(-Eu/(a*T)),u=1.22e22*l,c=3.79*1e23*r;let d=new RangeSolve2({f:[t,n,i,o,e],yi:[Na0,Nb0,Nd0,Nu0,V0],tinitial:0,dt:dt,tfinal:tfinal}).calcAll();NA=d[0],NB=d[1],ND=d[2],NU=d[3]}function windowResized(){clientWidth=Math.min(window.innerWidth-200,600),aspRatio=1,clientHeight=clientWidth*aspRatio,resizeCanvas(clientWidth,clientHeight),mainPlot.GPLOT.setOuterDim(clientWidth,clientHeight),mainPlot.GPLOT.setPos(0,0),gui.prototype.setPosition(clientWidth,mainPlot.GPLOT.mar[2]+100)}function setup(){titleDOM=document.getElementById("title");let t=createCanvas(clientWidth,clientHeight);math.import({RangeSolve2:RangeSolve2}),t.parent("plotContainer"),mainPlot=new PlotCanvas(this),mainPlot.xLims=[0,tfinal],mainPlot.yLims=[0,100],mainPlot.xAxisLabel="time (min)",mainPlot.yAxisLabel="moles of product",mainPlot.plotTitle="",mainPlot.plotSetup(),gui=createGui("Plot Controls",clientWidth-10,mainPlot.GPLOT.mar[2]+100),gui.newSlider("T",298,370,350,1,"Isothermal Temperature","K"),gui.newSlider("Ed",140,160,150,1,"activation energy<br>(desired)","kJ/mol"),gui.newSlider("Eu",150,170,160,1,"activation energy<br>(undesired)","kJ/mol"),gui.newDropdown("addedto",["A added to B","B added to A"]),gui.newDropdown("plot",["ND and NU","Selectivity (ND/NU)","NA and NB"],"plot: "),updateData(),NaFunction=new ArrayPlot(NA),NaFunction.lineColor=color(255,0,0,255),NbFunction=new ArrayPlot(NB),NbFunction.lineColor=color(50,220,0,255),NdFunction=new ArrayPlot(ND),NdFunction.lineColor=color(0,0,255,255),NuFunction=new ArrayPlot(NU),NuFunction.lineColor=color(0,100,100,255),mainPlot.addFuncs(NaFunction,NbFunction,NdFunction,NuFunction);let n=1e3;setTimeout(function t(){try{titleDOM.innerText=title,MathJax.Hub.Configured(),MathJax.Hub.Register.StartupHook("End",function(){mjready=!0})}catch(i){console.error(i),n<1e4?(n*=1.5,setTimeout(t,n)):console.log("mathjax could not load")}},n),noLoop()}function draw(){clear(),updateData(),NaFunction.update(NA),NbFunction.update(NB),NdFunction.update(ND),NuFunction.update(NU),NaFunction.lineColor=color(255,0,0,255),NbFunction.lineColor=color(50,220,0,255),NdFunction.lineColor=color(0,0,255,255),NuFunction.lineColor=color(0,100,100,255),mainPlot.plotDraw();const t=tfinal/8,n=NA.findIndex(n=>Math.abs(n[0]-t)<dt),i=NA[n][1],o=3*tfinal/8,e=NB.findIndex(t=>Math.abs(t[0]-o)<dt),a=NB[e][1],l=5*tfinal/8,r=ND.findIndex(t=>Math.abs(t[0]-l)<dt),u=ND[r][1],c=7*tfinal/8,d=NU.findIndex(t=>Math.abs(t[0]-c)<dt),N=NU[d][1];mainPlot.labelDraw("N",t,i,NaFunction.lineColor,[RIGHT,CENTER],!1,[2,1.8]),mainPlot.labelDraw("A",t,i,NaFunction.lineColor,[LEFT,TOP],"sub"),mainPlot.labelDraw("N",o,a,NbFunction.lineColor,[RIGHT,CENTER],!1,[2,1.8]),mainPlot.labelDraw("B",o,a,NbFunction.lineColor,[LEFT,TOP],"sub"),mainPlot.labelDraw("N",l,u,NdFunction.lineColor,[RIGHT,CENTER],!1,[2,1.8]),mainPlot.labelDraw("D",l,u,NdFunction.lineColor,[LEFT,TOP],"sub"),mainPlot.labelDraw("N",c,N,NuFunction.lineColor,[RIGHT,CENTER],!1,[2,1.8]),mainPlot.labelDraw("U",c,N,NuFunction.lineColor,[LEFT,TOP],"sub")}function updateJax(){if(mjready){title="";var t=MathJax.Hub.getAllJax("title")[0];MathJax.Hub.Queue(["Text",t,title])}}var gui,mainPlot,equation,T,Ed,Eu,NA,NB,ND,NU,NaFunction,NbFunction,NdFunction,NuFunction,n,titleDOM,clientWidth=Math.min(window.innerWidth-200,600),aspRatio=1,clientHeight=clientWidth*aspRatio,tfinal=20,dt=.1,Na0=0,Nb0=100,Nd0=0,Nu0=0,V0=10,title=`\\(\\mathrm{ A+B ${overText("\\rightarrow","k_{D}")} D \\qquad\\qquad } \\mathrm{ A+B ${overText("\\rightarrow","k_{U}")} U \\qquad\\qquad } \\)`;let mjready=!1;const sim=math.parser();