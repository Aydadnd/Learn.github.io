<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Lever Rule for Binary Mixtures on P-X-Y Diagram</title>

        <script src="./libraries/p5.js"></script>
        <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
        <meta name="keywords" content="LearnChemE, chemical engineering, engineering, simulation">
        <meta name="author" content="Patrick Doyle">
        <meta name="application-name" content="LearnChemE simulation template">
        <meta name="description" content="An interactive simulation to help young programmers learn to make simulations.">

        <link href="./sliders.css" rel="stylesheet">
        <link href="./style.css" rel="stylesheet">
        <link href="./bootstrap.min.css" rel="stylesheet">
        <script>
          MathJax = {
            chtml: {
              scale: 0.95,
              mathmlSpacing: true, // true for MathML spacing rules, false for TeX rules
              displayAlign: 'left', // default for indentalign when set to 'auto'
            }
          };
        </script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="./jquery.js"></script>
        <script src="./popper.js"></script>
        <script src="./bootstrap.min.js"></script>
    </head>

    <body>
        <div id="simulation-wrapper">
            
        
            <div class="inputs-wrapper" style="margin-top: 15px">
                <div class="input-row" style="margin-bottom: 10px">
                    <div class="input-label" id="label">Mole fraction A (purple dot):</div>
                    <input type="range" id="mole-fraction" min="0" max="1" step=".004" value="0.5"/>
                    <div id="mole-fraction-value" class="value-label">0.5</div>
                </div>
            </div>
        
            <div class="inputs-wrapper" style="grid-template-columns: max-content max-content max-content max-content">
                <div class="input-row" style="grid-template-columns: max-content 150px 15px max-content">
                    <div class="input-label" id="label">Pressure (kPa)</div>
                    <input type="range" id="pressure" min="2.4" max="10" step=".1" value="5"/>
                    <div id="pressure-value" class="value-label">5</div>
                </div>
                
                <div id="dir" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#directionsModal">Directions</div>
                <div id="detail" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#detailsModal">Details</div>
                <div id="about" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#aboutModal">About</div>    
            
            </div>
        </div>

        
        <div id="graphics-wrapper">

        </div>

        <div class="modal fade" id="directionsModal" tabindex="-1" role="dialog" aria-labelledby="directionsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="directionsModalLabel">Directions</h5>
                  <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>
                    A vapor pressure diagram shows the regions of phase stability for a two-componenent mixture as a function of pressure and composition at a fixed temperature. This simulation considers a nearly ideal solution and the vapor pressure diagram for this mixture can be calculated from the vapor pressures of the two pure substances at a given temperature. When the pressure and composition of the mixture are at a point inside the region bounded by the red and blue lines, both phases can coexist. At all other combinations of pressure and composition, only one phase, either liquid or vapor, is stable. In the vapor pressure diagram, the solid red line indicates the composition of the liquid and the solid blue line indicates the composition of the vapor. 
                  </p>  
                  <p>
                    For a point inside the two-phase region, the compositions of the two phases are determined by drawing horizontal lines (the shown dashed lines) to the red liquid composition line and the blue vapor composition line. These are called "tie lines" or "levers". The lever rule is used to calculate the relative amounts of the two phases, which are shown on the bar graph on the right. The compositions of the two phases aree indicated by dotted lines on the phase diagram and numerically below the bar graph. Use the "pressure" slider to adjust the pressure of the mixture and use the "mole fraction" slider to adjust the mole fraction of element A in the liquid and/or vapor phases.
                  </p>
                  
                </div>
              </div>
            </div>
          </div>

          <div class="modal fade" id="detailsModal" tabindex="-1" role="dialog" aria-labelledby="detailsModalLabel"
          aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
      
            <div class="modal-header">
              <h5 class="modal-title" id="detailsModalLabel">Details</h5>
              <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
      
            <div class="modal-body">
                <div class="modal-text">
                    The mixture in this simulation forms a nearly ideal solution that obeys Raoult's law (\(p_A = x_Ap_A^*\)) over the entire range of composition. Composition is usually expressed as a mole fraction but sometimes other units such as mole percent or mass percent are used. An "\(x\)" usually indicates the mole fraction of the liquid phase, a "\(y\)" is used for the vapor phase, and a "\(z\)" for the total composition of all phases together.
                </div>
                <div class="modal-text">
                    The amounts in the phases are calculated from the lever rule: \(\frac{n_{liquid}}{n_{vapor}} = \frac{l_{vapor}}{l_{liquid}}\). Here \(n_{liquid}\) is the moles of liquid phase, \(n_{vapor}\) is the moles of vapor phase, and \(l_{vapor}\) and \(l_{liquid}\) are the lengths of the levers indicated by dashed lines on the phase diagrams. The "relative amount" on the bar chart is calculated from \(\frac{n_{liquid}}{n_{liquid} + n_{vapor}}\) and \(\frac{n_{vapor}}{n_{liquid} + n_{vapor}}\).
                </div>
              
                <div style="height:10px"></div>
                <ol class="references">
                  <li>
                   L. D. Schmidt, <i>The Engineering of Chemical Reactions</i>, New York: Oxford University Press, 1998. 
                  </li>
                  <li>
                    D. Pearson, "A Polynomial-Time Algorithm for the Change-Making Problem," <i>Operations Research Letters</i>, <b>33</b>(3), 2005 pp. 231-234.
                  </li>
                </ol>
              
              
            </div>
          </div>
        </div>
      </div>


    <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="aboutModalLabel">About</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
        <div class="modal-body">
            <p>
              This simulation was created in the <a href="https://www.colorado.edu/chbe" target="_blank">Department of
                Chemical and Biological Engineering</a>, at University of Colorado Boulder for <a
                href="http://www.learncheme.com" target="_blank">LearnChemE.com</a> by Lisa Goss under the direction of Professor John L. Falconer and was converted to HTML5 by Patrick Doyle, with additional contributions by Neil Hendren. Address any questions or comments to learncheme@gmail.com. All of our
              simulations are open source, and are available on our <a
                href="https://github.com/LearnChemE/LearnChemE.github.io/" target="_blank">LearnChemE Github
                repository</a>.</p>
            <p style="line-height: 3rem;">
              If this simulation is too big for your screen, zoom out using&nbsp;<span><img
                  src="https://learncheme.github.io/media/command.png" style="height: 4ch;"></span>&nbsp;+&nbsp;<span><img
                  src="https://learncheme.github.io/media/minus.png" style="height: 4ch;"></span>&nbsp;on Mac
              or&nbsp;<span><img src="https://learncheme.github.io/media/ctrl.png"
                  style="height: 4ch;"></span>&nbsp;+&nbsp;<span><img src="https://learncheme.github.io/media/minus.png"
                  style="height: 4ch;"></span>&nbsp;on Windows. To zoom in, use&nbsp;<span><img
                  src="https://learncheme.github.io/media/command.png" style="height: 4ch;"></span>&nbsp;+&nbsp;<span><img
                  src="https://learncheme.github.io/media/plus.png" style="height: 4ch;"></span>&nbsp;on Mac
              or&nbsp;<span><img src="https://learncheme.github.io/media/ctrl.png"
                  style="height: 4ch;"></span>&nbsp;+&nbsp;<span><img src="https://learncheme.github.io/media/plus.png"
                  style="height: 4ch;"></span>&nbsp;on Windows.
            </p>
        </div>
        </div>
        </div>

        <script src="index.js"></script>
        <script src="functions.js"></script>
    </body>
</html>