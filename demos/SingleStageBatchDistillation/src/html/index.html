<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="en">
  <title>Single-Stage Batch Distillation</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script>
    MathJax = {
      chtml: {
        scale: 0.9,
        mathmlSpacing: true, // true for MathML spacing rules, false for TeX rules
        displayAlign: 'left', // default for indentalign when set to 'auto'
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-204988035-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-204988035-3');
  </script>
</head>

<body>
  <!-- <div class="simulation-title">Single-Stage Batch Distillation</div> -->

  <div class="simulation-controls">
    <div class="input-area">
  
      <div class="input-row">
        <div class="data-name">Initial mole fraction in still</div>
        <input type="range" id="z-slider" min="0.01" max="0.99" step="0.01" value="0.5">
        <div class="data-value" id="z-value">0.50</div>
        <div class="data-metric"></div>
      </div>

      <div class="input-row">
        <div class="data-name">Amount to evaporate</div>
        <input type="range" id="evap-slider" min="0.03" max="0.25" step="0.01" value="0.1">
        <div class="data-value" id="evap-value">0.10</div>
        <div class="data-metric">moles</div>
      </div>
  
    </div>

    <div class="modal-buttons-row">
      <div id="directions-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#directions-modal">Directions</div>
      <div id="details-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#details-modal">Details</div>
      <div id="about-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#about-modal">About</div>
    </div>

    <div class="input-buttons-row">
        <div id="selection-wrapper">
          <div class="selection-label">display: </div>
          <select id="display-select" value="flasks">
            <option value="flasks">Collected distillate</option>
            <option value="eq">x-y plot</option>
            <option value="txy">T-x-y diagram</option>
          </select>

          <div class="selection-label" id="composition-label">azeotrope:</div>
          <select id="eq-plot-select" value="no azeotrope">
            <option value="no azeotrope">No azeotrope</option>
            <option value="minimum-temperature azeotrope">Minimum-T azeotrope</option>
            <option value="maximum-temperature azeotrope">Maximum-T azeotrope</option>
          </select>
        </div>

        <div id="control-buttons-wrapper">
          <div id="start-collection">Collect</div>
          <div id="reset-simulation">Reset</div>
        </div>
    </div>
  </div>

  <div id="p5-container"></div>

  <div id="plot-container"></div>

  <div id="tooltip"></div>

  <div class="modal fade" id="directions-modal" tabindex="-1" role="dialog" aria-labelledby="directions-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="directions-modal-label">Directions</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            In this simulation, 1.0 mol of a binary mixture undergoes batch distillation. The first slider sets the mole fraction of the starting liquid, and the second slider sets the amount collected in each flask. You can choose an ideal solution (no azeotrope), a minimum-boiling temperature azeotrope or a maximum-boiling temperature azeotrope with the drop-down menu. When you click the "Collect" button, liquid evaporates and the distillate is collected in a flask. The flask is then set aside and an empty flask is substituted. The process repeats when you click the "Collect" again, until either 0.10 mol remains in the still or 8 flasks have been collected. The temperature is shown next to the thermometer. At any time select the collection flasks, an x-y plot, or a T-x-y plot to be displayed. Click "Reset" to start over. 
          </p>

        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="details-modal" tabindex="-1" role="dialog" aria-labelledby="details-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title" id="details-modal-label">Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>

        <div class="modal-body">
          In batch distillation of a binary mixture, a fixed amount of the feed mixture \( F \) (mol), with initial mole fraction \( x_F \), evaporates into a distillate collection flask; \( D_i \) (mol) is the mass of distillate collected into flask \( i \), and \( x_{D, i} \) is the mole fraction within distillate flask \( i \). This process is repeated to fill several distillate collection flasks. The overall mass balance is:
          
          $$
            [1] \quad F = B_{final} + D_{total}
          $$

          and the balance for the more volatile component is:

          $$
            [2] \quad F x_{F} = B_{final} x_{B, final} + D_{total} x_{D,avg}
          $$

          where \( x_{D,avg} \) is the average mole fraction within the distillate collection flasks and \( B_{final} \) and \( x_{B, final} \) are the final mass and mole fraction within the bottom (boiler) vessel. The value of \( x_{D, avg} \) can be calculated as:

          $$
            [3] \quad x_{D,avg} = \sum_{ i = 1 }^{ n } \left(  \frac{ D_{i} x_{D,i} + D_{i + 1} x_{D, i+1} ... D_{n} x_{D, n} }{ D_{total} } \right)
          $$

          where the total number of collection stages is \( n \) (equivalent to the total number of distillate collection flasks). Total distillate is given by:

          $$
            [4] \quad D_{total} = \sum_{ i = 1 }^{ n } \left( D_{i} + D_{ i + 1 } ... D_{ n } \right)
          $$

          Because the saturated vapor is in thermodynamic equilibrium with the saturated liquid in the vessel (and there is only one equilibrium stage: the boiler/bottom vessel), the composition of the vapor \( y_{B} \) is a function of the composition in the bottom vessel. During evaporation, both compositions change with time, except when a maximum temperature azeotrope is reached.  At equilibrium,

          $$
            [5] \quad y_{B} = f(x_{B})
          $$

          For an ideal system, Raoult's law is used to relate \( y_{B} \) to \( x_{B} \). The \( x_{B,i+1} \) composition is calculated by integration, where \( y_{B} \) is given by equation [5].

          $$
            [6] \quad \int_{B_{i}}^{B_{i + 1}} \frac{ 1 }{ B } dB = \int_{x_{B, i}}^{ x_{B, i + 1} } \frac{ 1 }{ y_{B} - x_{B} } dx_{B}
          $$

          The distillate composition is determined from a mass balance:

          $$
            [7] \quad x_{ D, i + 1 } = \frac{ B_{i} x_{B, i} - B_{ i + 1 }{ x_{ B, i + 1 } } }{ B_{i} - B_{i + 1} }
          $$

          <p>References:</p>

          <p class="references">
            <ol>
              <li>
                [1] P. C. Wankat, "Chapter 9: Batch Distillation," <i>Separation Process Engineering: Includes Mass Transfer Analysis</i>, 3rd ed., Upper Saddle River, NJ: Prentice Hall, 2012 pp. 329-347.
              </li>
            </ol>
          </p>
          <div style="margin-top: 2rem;"></div>
        </div>

      </div>
    </div>
  </div>

  <div class="modal fade" id="about-modal" tabindex="-1" role="dialog" aria-labelledby="about-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="about-modal-label">About</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            This simulation was created in the <a href="https://www.colorado.edu/chbe" target="_blank">Department of Chemical and Biological Engineering</a>, at University of Colorado Boulder for <a href="http://www.learncheme.com" target="_blank">LearnChemE.com</a> by Neil Hendren under the direction of Professor John L. Falconer. Address any questions or comments to learncheme@gmail.com. All of our simulations are open source, and are available on our <a href="https://github.com/LearnChemE/LearnChemE.github.io/" target="_blank">LearnChemE Github repository</a>.<br><br>Is your screen too small to fit this application? Try zooming-out on the web page (CTRL+"-" and CTRL+"=" on Windows, or ⌘+"-" and ⌘+"=" on Mac), then refreshing the page. This application is not compatible with Internet Explorer or web browsers that do not support WebGL and HTML5. Recommended browsers are the latest versions of: Chrome, Safari, Firefox, Edge, and Opera.
          </p>
        </div>
      </div>
    </div>
  </div>
</body>

</html>