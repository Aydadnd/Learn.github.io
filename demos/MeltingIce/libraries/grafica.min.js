function GPoint(){var t,i,s;if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2];else if(2===arguments.length&&arguments[0]instanceof p5.Vector)t=arguments[0].x,i=arguments[0].y,s=arguments[1];else if(2===arguments.length)t=arguments[0],i=arguments[1],s="";else if(1===arguments.length&&arguments[0]instanceof GPoint)t=arguments[0].getX(),i=arguments[0].getY(),s=arguments[0].getLabel();else if(1===arguments.length&&arguments[0]instanceof p5.Vector)t=arguments[0].x,i=arguments[0].y,s="";else{if(0!==arguments.length)throw new Error("GPoint constructor: signature not supported");t=0,i=0,s=""}this.x=t,this.y=i,this.label=s,this.valid=this.isValidNumber(this.x)&&this.isValidNumber(this.y)}function GTitle(t,i){this.parent=t,this.dim=i.slice(),this.relativePos=.5,this.plotPos=this.relativePos*this.dim[0],this.offset=10,this.text="",this.textAlignment=this.parent.CENTER,this.fontName="Helvetica",this.fontColor=this.parent.color(100),this.fontStyle=this.parent.BOLD,this.fontSize=Math.ceil(graphFontSize)}function GAxisLabel(t,i,s){this.parent=t,this.type=i===this.parent.BOTTOM||i===this.parent.TOP||i===this.parent.LEFT||i===this.parent.RIGHT?i:this.parent.BOTTOM,this.dim=s.slice(),this.relativePos=.5,this.plotPos=this.type===this.parent.BOTTOM||this.type===this.parent.TOP?this.relativePos*this.dim[0]:-this.relativePos*this.dim[1],this.offset=35,this.rotate=this.type!==this.parent.BOTTOM&&this.type!==this.parent.TOP,this.text="",this.textAlignment=this.parent.CENTER,this.fontName="Helvetica",this.fontColor=this.parent.color(0),this.fontSize=Math.ceil(graphFontSize)}function GAxis(t,i,s,e,o){this.parent=t,this.type=i===this.parent.BOTTOM||i===this.parent.TOP||i===this.parent.LEFT||i===this.parent.RIGHT?i:this.parent.BOTTOM,this.dim=s.slice(),this.lim=e.slice(),this.log=o,this.log&&(this.lim[0]<=0||this.lim[1]<=0)&&(console.log("The limits are negative. This is not allowed in logarithmic scale."),console.log("Will set them to (0.1, 10)"),this.lim[1]>this.lim[0]?(this.lim[0]=.1,this.lim[1]=10):(this.lim[0]=10,this.lim[1]=.1)),this.offset=5,this.lineColor=this.parent.color(0),this.lineWidth=1,this.nTicks=5,this.ticksSeparation=-1,this.ticks=[],this.plotTicks=[],this.ticksInside=[],this.tickLabels=[],this.fixedTicks=!1,this.tickLength=3,this.smallTickLength=2,this.expTickLabels=!1,this.rotateTickLabels=this.type!==this.parent.BOTTOM&&this.type!==this.parent.TOP,this.drawTickLabels=this.type===this.parent.BOTTOM||this.type===this.parent.LEFT,this.tickLabelOffset=7,this.ticksPrecision=void 0,this.lab=new GAxisLabel(this.parent,this.type,this.dim),this.drawAxisLabel=!0,this.fontName="Helvetica",this.fontColor=this.parent.color(0),this.fontSize=Math.ceil(graphFontSize+2),this.updateTicks(),this.updatePlotTicks(),this.updateTicksInside(),this.updateTickLabels()}function GHistogram(t,i,s,e){this.parent=t,this.type=i===GPlot.VERTICAL||i===GPlot.HORIZONTAL?i:GPlot.VERTICAL,this.dim=s.slice(),this.plotPoints=[];for(var o=0;o<e.length;o++)this.plotPoints[o]=new GPoint(e[o]);this.visible=!0,this.separations=[2],this.bgColors=[this.parent.color(150,150,255)],this.lineColors=[this.parent.color(100,100,255)],this.lineWidths=[1],this.differences=[],this.leftSides=[],this.rightSides=[],this.updateArrays(),this.labelsOffset=8,this.drawLabels=!1,this.rotateLabels=!1,this.fontName="Helvetica",this.fontColor=this.parent.color(0),this.fontSize=Math.ceil(graphFontSize-4)}function GLayer(t,i,s,e,o,h,n){this.parent=t,this.id=i,this.dim=s.slice(),this.xLim=e.slice(),this.yLim=o.slice(),this.xLog=h,this.yLog=n,this.xLog&&(this.xLim[0]<=0||this.xLim[1]<=0)&&(console.log("One of the limits is negative. This is not allowed in logarithmic scale."),console.log("Will set horizontal limits to (0.1, 10)"),this.xLim[0]=.1,this.xLim[1]=10),this.yLog&&(this.yLim[0]<=0||this.yLim[1]<=0)&&(console.log("One of the limits is negative. This is not allowed in logarithmic scale."),console.log("Will set vertical limits to (0.1, 10)"),this.yLim[0]=.1,this.yLim[1]=10),this.points=[],this.plotPoints=[],this.inside=[],this.pointColors=[this.parent.color(255,0,0,150)],this.pointSizes=[7],this.lineColor=this.parent.color(0,150),this.lineWidth=1,this.hist=void 0,this.histBasePoint=new GPoint(0,0),this.labelBgColor=this.parent.color(255,200),this.labelSeparation=[7,7],this.fontName="Helvetica",this.fontColor=this.parent.color(0),this.fontSize=Math.ceil(graphFontSize-4),this.cuts=[[0,0],[0,0],[0,0],[0,0]]}function GPlot(){var t,i,s,e,o;if(5===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3],o=arguments[4];else if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=450,o=300;else{if(1!==arguments.length)throw new Error("GPlot constructor: signature not supported");t=arguments[0],i=0,s=0,e=450,o=300}this.parent=t,this.parentElt=this.parent._renderer.elt,this.pos=[i,s],this.outerDim=[e,o],this.mar=[60,70,40,30],this.dim=[this.outerDim[0]-this.mar[1]-this.mar[3],this.outerDim[1]-this.mar[0]-this.mar[2]],this.xLim=[0,1],this.yLim=[0,1],this.fixedXLim=!1,this.fixedYLim=!1,this.xLog=!1,this.yLog=!1,this.invertedXScale=!1,this.invertedYScale=!1,this.includeAllLayersInLim=!0,this.expandLimFactor=.1,this.bgColor=this.parent.color(255),this.boxBgColor=this.parent.color(245),this.boxLineColor=this.parent.color(210),this.boxLineWidth=1,this.gridLineColor=this.parent.color(210),this.gridLineColor2=this.parent.color(225),this.gridLineWidth=1,this.mainLayer=new GLayer(this.parent,GPlot.MAINLAYERID,this.dim,this.xLim,this.yLim,this.xLog,this.yLog),this.layerList=[],this.xAxis=new GAxis(this.parent,this.parent.BOTTOM,this.dim,this.xLim,this.xLog),this.topAxis=new GAxis(this.parent,this.parent.TOP,this.dim,this.xLim,this.xLog),this.yAxis=new GAxis(this.parent,this.parent.LEFT,this.dim,this.yLim,this.yLog),this.rightAxis=new GAxis(this.parent,this.parent.RIGHT,this.dim,this.yLim,this.yLog),this.title=new GTitle(this.parent,this.dim),this.zoomingIsActive=!1,this.zoomFactor=1.3,this.increaseZoomButton=this.parent.LEFT,this.decreaseZoomButton=this.parent.RIGHT,this.increaseZoomKeyModifier=GPlot.NONE,this.decreaseZoomKeyModifier=GPlot.NONE,this.centeringIsActive=!1,this.centeringButton=this.parent.LEFT,this.centeringKeyModifier=GPlot.NONE,this.panningIsActive=!1,this.panningButton=this.parent.LEFT,this.panningKeyModifier=GPlot.NONE,this.panningReferencePoint=void 0,this.panningIntervalId=void 0,this.labelingIsActive=!1,this.labelingButton=this.parent.LEFT,this.labelingKeyModifier=GPlot.NONE,this.mousePos=void 0,this.resetIsActive=!1,this.resetButton=this.parent.RIGHT,this.resetKeyModifier=this.parent.CONTROL,this.xLimReset=void 0,this.yLimReset=void 0,this.clickListener=this.clickEvent.bind(this),this.wheelListener=this.wheelEvent.bind(this),this.mouseDownListener=this.mouseDownEvent.bind(this),this.mouseMoveListener=this.mouseMoveEvent.bind(this),this.mouseUpListener=this.mouseUpEvent.bind(this),this.touchStartListener=this.touchStartEvent.bind(this),this.touchMoveListener=this.touchMoveEvent.bind(this),this.touchEndListener=this.touchEndEvent.bind(this),this.parentElt.addEventListener("click",this.clickListener,!1),this.parentElt.addEventListener("wheel",this.wheelListener,!1),this.parentElt.addEventListener("mousedown",this.mouseDownListener,!1),this.parentElt.addEventListener("touchstart",this.touchStartListener,!1)}GPoint.prototype.isValidNumber=function(t){return!isNaN(t)&&isFinite(t)},GPoint.prototype.set=function(){var t,i,s;if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2];else if(2===arguments.length&&arguments[0]instanceof p5.Vector)t=arguments[0].x,i=arguments[0].y,s=arguments[1];else if(2===arguments.length)t=arguments[0],i=arguments[1],s="";else if(1===arguments.length&&arguments[0]instanceof GPoint)t=arguments[0].getX(),i=arguments[0].getY(),s=arguments[0].getLabel();else{if(!(1===arguments.length&&arguments[0]instanceof p5.Vector))throw new Error("GPoint.set(): signature not supported");t=arguments[0].x,i=arguments[0].y,s=""}this.x=t,this.y=i,this.label=s,this.valid=this.isValidNumber(this.x)&&this.isValidNumber(this.y)},GPoint.prototype.setX=function(t){this.x=t,this.valid=this.isValidNumber(this.x)&&this.isValidNumber(this.y)},GPoint.prototype.setY=function(t){this.y=t,this.valid=this.isValidNumber(this.x)&&this.isValidNumber(this.y)},GPoint.prototype.setLabel=function(t){this.label=t},GPoint.prototype.setXY=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else if(1===arguments.length&&arguments[0]instanceof GPoint)t=arguments[0].getX(),i=arguments[0].getY();else{if(!(1===arguments.length&&arguments[0]instanceof p5.Vector))throw new Error("GPoint.setXY(): signature not supported");t=arguments[0].x,i=arguments[0].y}this.x=t,this.y=i,this.valid=this.isValidNumber(this.x)&&this.isValidNumber(this.y)},GPoint.prototype.getX=function(){return this.x},GPoint.prototype.getY=function(){return this.y},GPoint.prototype.getLabel=function(){return this.label},GPoint.prototype.getValid=function(){return this.valid},GPoint.prototype.isValid=function(){return this.valid},GTitle.prototype.draw=function(){this.parent.push(),this.parent.textFont(this.fontName),this.parent.textStyle(this.fontStyle),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.parent.textAlign(this.textAlignment,this.parent.BOTTOM),this.parent.text(this.text,this.plotPos,-this.offset-this.dim[1]),this.parent.textStyle(this.parent.NORMAL),this.parent.pop()},GTitle.prototype.setDim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GTitle.setDim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t>0&&i>0&&(this.dim[0]=t,this.dim[1]=i,this.plotPos=this.relativePos*this.dim[0])},GTitle.prototype.setRelativePos=function(t){this.relativePos=t,this.plotPos=this.relativePos*this.dim[0]},GTitle.prototype.setOffset=function(t){this.offset=t},GTitle.prototype.setText=function(t){this.text=t},GTitle.prototype.setTextAlignment=function(t){t!==this.parent.CENTER&&t!==this.parent.LEFT&&t!==this.parent.RIGHT||(this.textAlignment=t)},GTitle.prototype.setFontName=function(t){this.fontName=t},GTitle.prototype.setFontColor=function(t){this.fontColor=t},GTitle.prototype.setFontStyle=function(t){this.fontStyle=t},GTitle.prototype.setFontSize=function(t){t>0&&(this.fontSize=t)},GTitle.prototype.setFontProperties=function(t,i,s){s>0&&(this.fontName=t,this.fontColor=i,this.fontSize=s)},GAxisLabel.prototype.draw=function(){switch(this.type){case this.parent.BOTTOM:this.drawAsXLabel();break;case this.parent.LEFT:this.drawAsYLabel();break;case this.parent.TOP:this.drawAsTopLabel();break;case this.parent.RIGHT:this.drawAsRightLabel()}},GAxisLabel.prototype.drawAsXLabel=function(){this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.rotate?(this.parent.textAlign(this.parent.RIGHT,this.parent.CENTER),this.parent.translate(this.plotPos,this.offset),this.parent.rotate(-.5*Math.PI),this.parent.text(this.text,0,0)):(this.parent.textAlign(this.textAlignment,this.parent.TOP),this.parent.text(this.text,this.plotPos,this.offset)),this.parent.pop()},GAxisLabel.prototype.drawAsYLabel=function(){this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.rotate?(this.parent.textAlign(this.textAlignment,this.parent.BOTTOM),this.parent.translate(-this.offset,this.plotPos),this.parent.rotate(-.5*Math.PI),this.parent.text(this.text,0,0)):(this.parent.textAlign(this.parent.RIGHT,this.parent.CENTER),this.parent.text(this.text,-this.offset,this.plotPos)),this.parent.pop()},GAxisLabel.prototype.drawAsTopLabel=function(){this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.rotate?(this.parent.textAlign(this.parent.LEFT,this.parent.CENTER),this.parent.translate(this.plotPos,-this.offset-this.dim[1]),this.parent.rotate(-.5*Math.PI),this.parent.text(this.text,0,0)):(this.parent.textAlign(this.textAlignment,this.parent.BOTTOM),this.parent.text(this.text,this.plotPos,-this.offset-this.dim[1])),this.parent.pop()},GAxisLabel.prototype.drawAsRightLabel=function(){this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.rotate?(this.parent.textAlign(this.textAlignment,this.parent.TOP),this.parent.translate(this.offset+this.dim[0],this.plotPos),this.parent.rotate(-.5*Math.PI),this.parent.text(this.text,0,0)):(this.parent.textAlign(this.parent.LEFT,this.parent.CENTER),this.parent.text(this.text,this.offset+this.dim[0],this.plotPos)),this.parent.pop()},GAxisLabel.prototype.setDim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GAxisLabel.setDim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t>0&&i>0&&(this.dim[0]=t,this.dim[1]=i,this.plotPos=this.type===this.parent.BOTTOM||this.type===this.parent.TOP?this.relativePos*this.dim[0]:-this.relativePos*this.dim[1])},GAxisLabel.prototype.setRelativePos=function(t){this.relativePos=t,this.plotPos=this.type===this.parent.BOTTOM||this.type===this.parent.TOP?this.relativePos*this.dim[0]:-this.relativePos*this.dim[1]},GAxisLabel.prototype.setOffset=function(t){this.offset=t},GAxisLabel.prototype.setRotate=function(t){this.rotate=t},GAxisLabel.prototype.setText=function(t){this.text=t},GAxisLabel.prototype.setTextAlignment=function(t){t!==this.parent.CENTER&&t!==this.parent.LEFT&&t!==this.parent.RIGHT||(this.textAlignment=t)},GAxisLabel.prototype.setFontName=function(t){this.fontName=t},GAxisLabel.prototype.setFontColor=function(t){this.fontColor=t},GAxisLabel.prototype.setFontSize=function(t){t>0&&(this.fontSize=t)},GAxisLabel.prototype.setFontProperties=function(t,i,s){s>0&&(this.fontName=t,this.fontColor=i,this.fontSize=s)},GAxis.prototype.obtainSigDigits=function(t){return Math.round(-Math.log(.5*Math.abs(t))/Math.LN10)},GAxis.prototype.roundPlus=function(t,i){return t=Math.round(t*Math.pow(10,i))/Math.pow(10,i),i<=0&&(t=Math.round(t)),t},GAxis.prototype.adaptSize=function(t,i){i<t.length&&t.splice(i,Number.MAX_VALUE)},GAxis.prototype.updateTicks=function(){this.log?this.obtainLogarithmicTicks():this.obtainLinearTicks()},GAxis.prototype.obtainLogarithmicTicks=function(){var t,i;this.lim[1]>this.lim[0]?(t=Math.floor(Math.log(this.lim[0])/Math.LN10),i=Math.ceil(Math.log(this.lim[1])/Math.LN10)):(t=Math.floor(Math.log(this.lim[1])/Math.LN10),i=Math.ceil(Math.log(this.lim[0])/Math.LN10));var s=9*(i-t)+1;this.adaptSize(this.ticks,s);for(var e=t;e<i;e++)for(var o=this.roundPlus(Math.exp(e*Math.LN10),-e),h=0;h<9;h++)this.ticks[9*(e-t)+h]=(h+1)*o;this.ticks[this.ticks.length-1]=this.roundPlus(Math.exp(i*Math.LN10),-e),this.lim[1]<this.lim[0]&&this.ticks.reverse()},GAxis.prototype.obtainLinearTicks=function(){var t=0,i=0,s=0;if(this.ticksSeparation>0){for(t=this.lim[1]>this.lim[0]?this.ticksSeparation:-this.ticksSeparation,s=this.obtainSigDigits(t);this.roundPlus(t,s)-t!=0;)s++;i=Math.floor((this.lim[1]-this.lim[0])/t)}else this.nTicks>0&&(t=(this.lim[1]-this.lim[0])/this.nTicks,s=this.obtainSigDigits(t),t=this.roundPlus(t,s),(0===t||Math.abs(t)>Math.abs(this.lim[1]-this.lim[0]))&&(s++,t=this.roundPlus((this.lim[1]-this.lim[0])/this.nTicks,s)),i=Math.floor((this.lim[1]-this.lim[0])/t));if(i>0){var e=this.lim[0]+(this.lim[1]-this.lim[0]-i*t)/2;for(e=this.roundPlus(e-2*t,s);(this.lim[1]-e)*(this.lim[0]-e)>0;)e=this.roundPlus(e+t,s);var o=Math.floor(Math.abs((this.lim[1]-e)/t))+1;this.adaptSize(this.ticks,o),this.ticks[0]=e;for(var h=1;h<o;h++)this.ticks[h]=this.roundPlus(this.ticks[h-1]+t,s);this.ticksPrecision=s}else this.ticks=[]},GAxis.prototype.updatePlotTicks=function(){var t,i,s=this.ticks.length;if(this.adaptSize(this.plotTicks,s),this.log)for(t=this.type===this.parent.BOTTOM||this.type===this.parent.TOP?this.dim[0]/Math.log(this.lim[1]/this.lim[0]):-this.dim[1]/Math.log(this.lim[1]/this.lim[0]),i=0;i<s;i++)this.plotTicks[i]=Math.log(this.ticks[i]/this.lim[0])*t;else for(t=this.type===this.parent.BOTTOM||this.type===this.parent.TOP?this.dim[0]/(this.lim[1]-this.lim[0]):-this.dim[1]/(this.lim[1]-this.lim[0]),i=0;i<s;i++)this.plotTicks[i]=(this.ticks[i]-this.lim[0])*t},GAxis.prototype.updateTicksInside=function(){var t,i=this.ticks.length;if(this.adaptSize(this.ticksInside,i),this.type===this.parent.BOTTOM||this.type===this.parent.TOP)for(t=0;t<i;t++)this.ticksInside[t]=this.plotTicks[t]>=0&&this.plotTicks[t]<=this.dim[0];else for(t=0;t<i;t++)this.ticksInside[t]=-this.plotTicks[t]>=0&&-this.plotTicks[t]<=this.dim[1]},GAxis.prototype.updateTickLabels=function(){var t,i,s,e,o=this.ticks.length;if(this.adaptSize(this.tickLabels,o),this.log)for(e=0;e<o;e++)t=this.ticks[e],t>0?(i=Math.log(t)/Math.LN10,s=Math.abs(i-Math.round(i))<1e-4,s?(i=Math.round(i),this.expTickLabels?this.tickLabels[e]="1e"+i:this.tickLabels[e]=i>-3.1&&i<3.1?i>=0?""+Math.round(t):""+t:"1e"+i):this.tickLabels[e]=""):this.tickLabels[e]="";else for(e=0;e<o;e++)t=this.ticks[e],t%1==0?this.tickLabels[e]=""+Math.round(t):void 0!==this.ticksPrecision&&this.ticksPrecision>=0?this.tickLabels[e]=""+parseFloat(t).toFixed(this.ticksPrecision):this.tickLabels[e]=""+t},GAxis.prototype.moveLim=function(t){if(t[1]!==t[0])if(this.log&&(t[0]<=0||t[1]<=0))console.log("The limits are negative. This is not allowed in logarithmic scale.");else{if(this.lim[0]=t[0],this.lim[1]=t[1],!this.fixedTicks){var i=this.ticks.length;if(this.log)this.obtainLogarithmicTicks();else if(i>0){var s=0,e=0;if(this.ticksSeparation>0)for(s=this.lim[1]>this.lim[0]?this.ticksSeparation:-this.ticksSeparation,e=this.obtainSigDigits(s);this.roundPlus(s,e)-s!=0;)e++;else s=1===i?this.lim[1]-this.lim[0]:this.ticks[1]-this.ticks[0],e=this.obtainSigDigits(s),s=this.roundPlus(s,e),(0===s||Math.abs(s)>Math.abs(this.lim[1]-this.lim[0]))&&(e++,s=1===i?this.lim[1]-this.lim[0]:this.ticks[1]-this.ticks[0],s=this.roundPlus(s,e)),s=this.lim[1]>this.lim[0]?Math.abs(s):-Math.abs(s);var o=this.ticks[0]+s*Math.ceil((this.lim[0]-this.ticks[0])/s);o=this.roundPlus(o,e),(this.lim[1]-o)*(this.lim[0]-o)>0&&(o=this.ticks[0]+s*Math.floor((this.lim[0]-this.ticks[0])/s),o=this.roundPlus(o,e)),i=Math.floor(Math.abs((this.lim[1]-o)/s))+1,this.adaptSize(this.ticks,i),this.ticks[0]=o;for(var h=1;h<i;h++)this.ticks[h]=this.roundPlus(this.ticks[h-1]+s,e);this.ticksPrecision!==e&&console.log("There is a problem in the axis ticks precision calculation")}this.updateTickLabels()}this.updatePlotTicks(),this.updateTicksInside()}},GAxis.prototype.draw=function(){switch(this.type){case this.parent.BOTTOM:this.drawAsXAxis();break;case this.parent.LEFT:this.drawAsYAxis();break;case this.parent.TOP:this.drawAsTopAxis();break;case this.parent.RIGHT:this.drawAsRightAxis()}this.drawAxisLabel&&this.lab.draw()},GAxis.prototype.drawAsXAxis=function(){var t;for(this.parent.push(),this.parent.stroke(this.lineColor),this.parent.strokeWeight(this.lineWidth),this.parent.strokeCap(this.parent.SQUARE),this.parent.line(0,this.offset,this.dim[0],this.offset),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&(this.log&&""===this.tickLabels[t]?this.parent.line(this.plotTicks[t],this.offset,this.plotTicks[t],this.offset+this.smallTickLength):this.parent.line(this.plotTicks[t],this.offset,this.plotTicks[t],this.offset+this.tickLength));if(this.parent.pop(),this.drawTickLabels){if(this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.rotateTickLabels){var i=.5*Math.PI;for(this.parent.textAlign(this.parent.RIGHT,this.parent.CENTER),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&""!==this.tickLabels[t]&&(this.parent.push(),this.parent.translate(this.plotTicks[t],this.offset+this.tickLabelOffset),this.parent.rotate(-i),this.parent.text(this.tickLabels[t],0,0),this.parent.pop())}else for(this.parent.textAlign(this.parent.CENTER,this.parent.TOP),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&""!==this.tickLabels[t]&&this.parent.text(this.tickLabels[t],this.plotTicks[t],this.offset+this.tickLabelOffset);this.parent.pop()}},GAxis.prototype.drawAsYAxis=function(){var t;for(this.parent.push(),this.parent.stroke(this.lineColor),this.parent.strokeWeight(this.lineWidth),this.parent.strokeCap(this.parent.SQUARE),this.parent.line(-this.offset,0,-this.offset,-this.dim[1]),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&(this.log&&""===this.tickLabels[t]?this.parent.line(-this.offset,this.plotTicks[t],-this.offset-this.smallTickLength,this.plotTicks[t]):this.parent.line(-this.offset,this.plotTicks[t],-this.offset-this.tickLength,this.plotTicks[t]));if(this.parent.pop(),this.drawTickLabels){if(this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.rotateTickLabels){var i=.5*Math.PI;for(this.parent.textAlign(this.parent.CENTER,this.parent.BOTTOM),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&""!==this.tickLabels[t]&&(this.parent.push(),this.parent.translate(-this.offset-this.tickLabelOffset,this.plotTicks[t]),this.parent.rotate(-i),this.parent.text(this.tickLabels[t],0,0),this.parent.pop())}else for(this.parent.textAlign(this.parent.RIGHT,this.parent.CENTER),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&""!==this.tickLabels[t]&&this.parent.text(this.tickLabels[t],-this.offset-this.tickLabelOffset,this.plotTicks[t]);this.parent.pop()}},GAxis.prototype.drawAsTopAxis=function(){var t;for(this.parent.push(),this.parent.stroke(this.lineColor),this.parent.strokeWeight(this.lineWidth),this.parent.strokeCap(this.parent.SQUARE),this.parent.translate(0,-this.dim[1]),this.parent.line(0,-this.offset,this.dim[0],-this.offset),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&(this.log&&""===this.tickLabels[t]?this.parent.line(this.plotTicks[t],-this.offset,this.plotTicks[t],-this.offset-this.smallTickLength):this.parent.line(this.plotTicks[t],-this.offset,this.plotTicks[t],-this.offset-this.tickLength));if(this.parent.pop(),this.drawTickLabels){if(this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.parent.translate(0,-this.dim[1]),this.rotateTickLabels){var i=.5*Math.PI;for(this.parent.textAlign(this.parent.LEFT,this.parent.CENTER),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&""!==this.tickLabels[t]&&(this.parent.push(),this.parent.translate(this.plotTicks[t],-this.offset-this.tickLabelOffset),this.parent.rotate(-i),this.parent.text(this.tickLabels[t],0,0),this.parent.pop())}else for(this.parent.textAlign(this.parent.CENTER,this.parent.BOTTOM),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&""!==this.tickLabels[t]&&this.parent.text(this.tickLabels[t],this.plotTicks[t],-this.offset-this.tickLabelOffset);this.parent.pop()}},GAxis.prototype.drawAsRightAxis=function(){var t;for(this.parent.push(),this.parent.stroke(this.lineColor),this.parent.strokeWeight(this.lineWidth),this.parent.strokeCap(this.parent.SQUARE),this.parent.translate(this.dim[0],0),this.parent.line(this.offset,0,this.offset,-this.dim[1]),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&(this.log&&""===this.tickLabels[t]?this.parent.line(this.offset,this.plotTicks[t],this.offset+this.smallTickLength,this.plotTicks[t]):this.parent.line(this.offset,this.plotTicks[t],this.offset+this.tickLength,this.plotTicks[t]));if(this.parent.pop(),this.drawTickLabels){if(this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.parent.translate(this.dim[0],0),this.rotateTickLabels){var i=.5*Math.PI;for(this.parent.textAlign(this.parent.CENTER,this.parent.TOP),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&""!==this.tickLabels[t]&&(this.parent.push(),this.parent.translate(this.offset+this.tickLabelOffset,this.plotTicks[t]),this.parent.rotate(-i),this.parent.text(this.tickLabels[t],0,0),this.parent.pop())}else for(this.parent.textAlign(this.parent.LEFT,this.parent.CENTER),t=0;t<this.plotTicks.length;t++)this.ticksInside[t]&&""!==this.tickLabels[t]&&this.parent.text(this.tickLabels[t],this.offset+this.tickLabelOffset,this.plotTicks[t]);this.parent.pop()}},GAxis.prototype.setDim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GAxis.setDim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t>0&&i>0&&(this.dim[0]=t,this.dim[1]=i,this.updatePlotTicks(),this.lab.setDim(this.dim))},GAxis.prototype.setLim=function(t){t[1]!==t[0]&&(this.log&&(t[0]<=0||t[1]<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.lim[0]=t[0],this.lim[1]=t[1],this.fixedTicks||(this.updateTicks(),this.updateTickLabels()),this.updatePlotTicks(),this.updateTicksInside()))},GAxis.prototype.setLimAndLog=function(t,i){t[1]!==t[0]&&(i&&(t[0]<=0||t[1]<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.lim[0]=t[0],this.lim[1]=t[1],this.log=i,this.fixedTicks||(this.updateTicks(),this.updateTickLabels()),this.updatePlotTicks(),this.updateTicksInside()))},GAxis.prototype.setLog=function(t){t!==this.log&&(this.log=t,this.log&&(this.lim[0]<=0||this.lim[1]<=0)&&(console.log("The limits are negative. This is not allowed in logarithmic scale."),console.log("Will set them to (0.1, 10)"),this.lim[1]>this.lim[0]?(this.lim[0]=.1,this.lim[1]=10):(this.lim[0]=10,this.lim[1]=.1)),this.fixedTicks||(this.updateTicks(),this.updateTickLabels()),this.updatePlotTicks(),this.updateTicksInside())},GAxis.prototype.setOffset=function(t){this.offset=t},GAxis.prototype.setLineColor=function(t){this.lineColor=t},GAxis.prototype.setLineWidth=function(t){t>0&&(this.lineWidth=t)},GAxis.prototype.setNTicks=function(t){t>=0&&(this.nTicks=t,this.ticksSeparation=-1,this.fixedTicks=!1,this.log||(this.updateTicks(),this.updatePlotTicks(),this.updateTicksInside(),this.updateTickLabels()))},GAxis.prototype.setTicksSeparation=function(t){this.ticksSeparation=t,this.fixedTicks=!1,this.log||(this.updateTicks(),this.updatePlotTicks(),this.updateTicksInside(),this.updateTickLabels())},GAxis.prototype.setTicks=function(t){var i=t.length;this.adaptSize(this.ticks,i);for(var s=0;s<i;s++)this.ticks[s]=t[s];this.fixedTicks=!0,this.ticksPrecision=void 0,this.updatePlotTicks(),this.updateTicksInside(),this.updateTickLabels()},GAxis.prototype.setTickLabels=function(t){if(t.length===this.tickLabels.length){for(var i=0;i<this.tickLabels.length;i++)this.tickLabels[i]=t[i];this.fixedTicks=!0,this.ticksPrecision=void 0}},GAxis.prototype.setFixedTicks=function(t){t!==this.fixedTicks&&(this.fixedTicks=t,this.fixedTicks||(this.updateTicks(),this.updatePlotTicks(),this.updateTicksInside(),this.updateTickLabels()))},GAxis.prototype.setTickLength=function(t){this.tickLength=t},GAxis.prototype.setSmallTickLength=function(t){this.smallTickLength=t},GAxis.prototype.setExpTickLabels=function(t){t!==this.expTickLabels&&(this.expTickLabels=t,this.updateTickLabels())},GAxis.prototype.setRotateTickLabels=function(t){this.rotateTickLabels=t},GAxis.prototype.setDrawTickLabels=function(t){this.drawTickLabels=t},GAxis.prototype.setTickLabelOffset=function(t){this.tickLabelOffset=t},GAxis.prototype.setDrawAxisLabel=function(t){this.drawAxisLabel=t},GAxis.prototype.setAxisLabelText=function(t){this.lab.setText(t)},GAxis.prototype.setFontName=function(t){this.fontName=t},GAxis.prototype.setFontColor=function(t){this.fontColor=t},GAxis.prototype.setFontSize=function(t){t>0&&(this.fontSize=t)},GAxis.prototype.setFontProperties=function(t,i,s){s>0&&(this.fontName=t,this.fontColor=i,this.fontSize=s)},GAxis.prototype.setAllFontProperties=function(t,i,s){this.setFontProperties(t,i,s),this.lab.setFontProperties(t,i,s)},GAxis.prototype.getTicks=function(){if(this.fixedTicks)return this.ticks.slice();for(var t=[],i=0,s=0;s<this.ticksInside.length;s++)this.ticksInside[s]&&(t[i]=this.ticks[s],i++);return t},GAxis.prototype.getTicksRef=function(){return this.ticks},GAxis.prototype.getPlotTicks=function(){if(this.fixedTicks)return this.plotTicks.slice();for(var t=[],i=0,s=0;s<this.ticksInside.length;s++)this.ticksInside[s]&&(t[i]=this.plotTicks[s],i++);return t},GAxis.prototype.getPlotTicksRef=function(){return this.plotTicks},GAxis.prototype.getAxisLabel=function(){return this.lab},GHistogram.prototype.updateArrays=function(){var t,i=this.plotPoints.length;if(this.differences.length>i&&(this.differences.splice(i,Number.MAX_VALUE),this.leftSides.splice(i,Number.MAX_VALUE),this.rightSides.splice(i,Number.MAX_VALUE)),1===i)this.leftSides[0]=this.type===GPlot.VERTICAL?.2*this.dim[0]:.2*this.dim[1],this.rightSides[0]=this.leftSides[0];else if(i>1){for(t=0;t<i-1;t++)if(this.plotPoints[t].isValid()&&this.plotPoints[t+1].isValid()){var s,e=this.separations[t%this.separations.length];s=this.type===GPlot.VERTICAL?this.plotPoints[t+1].getX()-this.plotPoints[t].getX():this.plotPoints[t+1].getY()-this.plotPoints[t].getY(),this.differences[t]=s>0?(s-e)/2:(s+e)/2}else this.differences[t]=0;for(this.leftSides[0]=this.differences[0],this.rightSides[0]=this.differences[0],t=1;t<i-1;t++)this.leftSides[t]=this.differences[t-1],this.rightSides[t]=this.differences[t];this.leftSides[i-1]=this.differences[i-2],this.rightSides[i-1]=this.differences[i-2]}},GHistogram.prototype.draw=function(t){if(this.visible){var i,s,e,o,h,n,r=0;t.isValid()&&(r=this.type===GPlot.VERTICAL?t.getY():t.getX());var a=this.plotPoints.length;this.parent.push(),this.parent.rectMode(this.parent.CORNERS),this.parent.strokeCap(this.parent.SQUARE);for(var l=0;l<a;l++)i=this.plotPoints[l],i.isValid()&&(this.type===GPlot.VERTICAL?(s=i.getX()-this.leftSides[l],e=i.getX()+this.rightSides[l],o=i.getY(),h=r):(s=r,e=i.getX(),o=i.getY()-this.leftSides[l],h=i.getY()+this.rightSides[l]),s<0?s=0:s>this.dim[0]&&(s=this.dim[0]),-o<0?o=0:-o>this.dim[1]&&(o=-this.dim[1]),e<0?e=0:e>this.dim[0]&&(e=this.dim[0]),-h<0?h=0:-h>this.dim[1]&&(h=-this.dim[1]),n=this.lineWidths[l%this.lineWidths.length],this.parent.fill(this.bgColors[l%this.bgColors.length]),this.parent.stroke(this.lineColors[l%this.lineColors.length]),this.parent.strokeWeight(n),Math.abs(e-s)>2*n&&Math.abs(h-o)>2*n?this.parent.rect(s,o,e,h):(this.type===GPlot.VERTICAL&&e!==s&&(o!==h||0!==o&&o!==-this.dim[1])||this.type===GPlot.HORIZONTAL&&h!==o&&(s!==e||0!==s&&s!==this.dim[0]))&&(this.parent.rect(s,o,e,h),this.parent.line(s,o,s,h),this.parent.line(e,o,e,h),this.parent.line(s,o,e,o),this.parent.line(s,h,e,h)));this.parent.pop(),this.drawLabels&&this.drawHistLabels()}},GHistogram.prototype.drawHistLabels=function(){var t,i,s=this.plotPoints.length,e=.5*Math.PI;if(this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.noStroke(),this.type===GPlot.VERTICAL)if(this.rotateLabels)for(this.parent.textAlign(this.parent.RIGHT,this.parent.CENTER),i=0;i<s;i++)t=this.plotPoints[i],t.isValid()&&t.getX()>=0&&t.getX()<=this.dim[0]&&(this.parent.push(),this.parent.translate(t.getX(),this.labelsOffset),this.parent.rotate(-e),this.parent.text(t.getLabel(),0,0),this.parent.pop());else for(this.parent.textAlign(this.parent.CENTER,this.parent.TOP),i=0;i<s;i++)t=this.plotPoints[i],t.isValid()&&t.getX()>=0&&t.getX()<=this.dim[0]&&this.parent.text(t.getLabel(),t.getX(),this.labelsOffset);else if(this.rotateLabels)for(this.parent.textAlign(this.parent.CENTER,this.parent.BOTTOM),i=0;i<s;i++)t=this.plotPoints[i],t.isValid()&&-t.getY()>=0&&-t.getY()<=this.dim[1]&&(this.parent.push(),this.parent.translate(-this.labelsOffset,t.getY()),this.parent.rotate(-e),this.parent.text(t.getLabel(),0,0),
this.parent.pop());else for(this.parent.textAlign(this.parent.RIGHT,this.parent.CENTER),i=0;i<s;i++)t=this.plotPoints[i],t.isValid()&&-t.getY()>=0&&-t.getY()<=this.dim[1]&&this.parent.text(t.getLabel(),-this.labelsOffset,t.getY());this.parent.pop()},GHistogram.prototype.setType=function(t){t===this.type||t!==GPlot.VERTICAL&&t!==GPlot.HORIZONTAL||(this.type=t,this.updateArrays())},GHistogram.prototype.setDim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GHistogram.setDim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t>0&&i>0&&(this.dim[0]=t,this.dim[1]=i,this.updateArrays())},GHistogram.prototype.setPlotPoints=function(t){var i,s=t.length;if(this.plotPoints.length===s)for(i=0;i<s;i++)this.plotPoints[i].set(t[i]);else if(this.plotPoints.length>s){for(i=0;i<s;i++)this.plotPoints[i].set(t[i]);this.plotPoints.splice(s,Number.MAX_VALUE)}else{for(i=0;i<this.plotPoints.length;i++)this.plotPoints[i].set(t[i]);for(i=this.plotPoints.length;i<s;i++)this.plotPoints[i]=new GPoint(t[i])}this.updateArrays()},GHistogram.prototype.setPlotPoint=function(t,i){if(t<this.plotPoints.length)this.plotPoints[t].set(i);else{if(t!==this.plotPoints.length)throw new Error("GHistogram.setPlotPoint(): the index position is outside the array size");this.plotPoints[t]=new GPoint(i)}this.updateArrays()},GHistogram.prototype.addPlotPoint=function(){if(2===arguments.length)this.plotPoints.push(new GPoint(arguments[0],arguments[1]));else{if(1!==arguments.length)throw new Error("GHistogram.addPlotPoint(): signature not supported");this.plotPoints.push(new GPoint(arguments[0]))}this.updateArrays()},GHistogram.prototype.removePlotPoint=function(t){if(!(t<this.plotPoints.length))throw new Error("GHistogram.removePlotPoint(): the index position is outside the array size");this.plotPoints.splice(t,1),this.updateArrays()},GHistogram.prototype.setSeparations=function(t){this.separations=t.slice(),this.updateArrays()},GHistogram.prototype.setBgColors=function(t){this.bgColors=t.slice()},GHistogram.prototype.setLineColors=function(t){this.lineColors=t.slice()},GHistogram.prototype.setLineWidths=function(t){this.lineWidths=t.slice()},GHistogram.prototype.setVisible=function(t){this.visible=t},GHistogram.prototype.setLabelsOffset=function(t){this.labelsOffset=t},GHistogram.prototype.setDrawLabels=function(t){this.drawLabels=t},GHistogram.prototype.setRotateLabels=function(t){this.rotateLabels=t},GHistogram.prototype.setFontName=function(t){this.fontName=t},GHistogram.prototype.setFontColor=function(t){this.fontColor=t},GHistogram.prototype.setFontSize=function(t){t>0&&(this.fontSize=t)},GHistogram.prototype.setFontProperties=function(t,i,s){s>0&&(this.fontName=t,this.fontColor=i,this.fontSize=s)},GLayer.prototype.isValidNumber=function(t){return!isNaN(t)&&isFinite(t)},GLayer.prototype.isId=function(t){return this.id===t},GLayer.prototype.valueToXPlot=function(t){return this.xLog?this.dim[0]*Math.log(t/this.xLim[0])/Math.log(this.xLim[1]/this.xLim[0]):this.dim[0]*(t-this.xLim[0])/(this.xLim[1]-this.xLim[0])},GLayer.prototype.valueToYPlot=function(t){return this.yLog?-this.dim[1]*Math.log(t/this.yLim[0])/Math.log(this.yLim[1]/this.yLim[0]):-this.dim[1]*(t-this.yLim[0])/(this.yLim[1]-this.yLim[0])},GLayer.prototype.valueToPlot=function(){if(2===arguments.length)return[this.valueToXPlot(arguments[0]),this.valueToYPlot(arguments[1])];if(1===arguments.length&&arguments[0]instanceof GPoint)return new GPoint(this.valueToXPlot(arguments[0].getX()),this.valueToYPlot(arguments[0].getY()),arguments[0].getLabel());if(1===arguments.length&&arguments[0]instanceof Array&&arguments[0][0]instanceof GPoint){var t,i,s,e,o,h,n=arguments[0].length,r=[];if(this.xLog&&this.yLog)for(t=this.dim[0]/Math.log(this.xLim[1]/this.xLim[0]),i=-this.dim[1]/Math.log(this.yLim[1]/this.yLim[0]),h=0;h<n;h++)s=arguments[0][h],e=Math.log(s.getX()/this.xLim[0])*t,o=Math.log(s.getY()/this.yLim[0])*i,r[h]=new GPoint(e,o,s.getLabel());else if(this.xLog)for(t=this.dim[0]/Math.log(this.xLim[1]/this.xLim[0]),i=-this.dim[1]/(this.yLim[1]-this.yLim[0]),h=0;h<n;h++)s=arguments[0][h],e=Math.log(s.getX()/this.xLim[0])*t,o=(s.getY()-this.yLim[0])*i,r[h]=new GPoint(e,o,s.getLabel());else if(this.yLog)for(t=this.dim[0]/(this.xLim[1]-this.xLim[0]),i=-this.dim[1]/Math.log(this.yLim[1]/this.yLim[0]),h=0;h<n;h++)s=arguments[0][h],e=(s.getX()-this.xLim[0])*t,o=Math.log(s.getY()/this.yLim[0])*i,r[h]=new GPoint(e,o,s.getLabel());else for(t=this.dim[0]/(this.xLim[1]-this.xLim[0]),i=-this.dim[1]/(this.yLim[1]-this.yLim[0]),h=0;h<n;h++)s=arguments[0][h],e=(s.getX()-this.xLim[0])*t,o=(s.getY()-this.yLim[0])*i,r[h]=new GPoint(e,o,s.getLabel());return r}throw new Error("GLayer.valueToPlot(): signature not supported")},GLayer.prototype.updatePlotPoints=function(){var t,i,s,e,o,h,n=this.points.length;if(this.plotPoints.length<n)for(h=this.plotPoints.length;h<n;h++)this.plotPoints[h]=new GPoint;else this.plotPoints.length>n&&this.plotPoints.splice(n,Number.MAX_VALUE);if(this.xLog&&this.yLog)for(t=this.dim[0]/Math.log(this.xLim[1]/this.xLim[0]),i=-this.dim[1]/Math.log(this.yLim[1]/this.yLim[0]),h=0;h<n;h++)s=this.points[h],e=Math.log(s.getX()/this.xLim[0])*t,o=Math.log(s.getY()/this.yLim[0])*i,this.plotPoints[h].set(e,o,s.getLabel());else if(this.xLog)for(t=this.dim[0]/Math.log(this.xLim[1]/this.xLim[0]),i=-this.dim[1]/(this.yLim[1]-this.yLim[0]),h=0;h<n;h++)s=this.points[h],e=Math.log(s.getX()/this.xLim[0])*t,o=(s.getY()-this.yLim[0])*i,this.plotPoints[h].set(e,o,s.getLabel());else if(this.yLog)for(t=this.dim[0]/(this.xLim[1]-this.xLim[0]),i=-this.dim[1]/Math.log(this.yLim[1]/this.yLim[0]),h=0;h<n;h++)s=this.points[h],e=(s.getX()-this.xLim[0])*t,o=Math.log(s.getY()/this.yLim[0])*i,this.plotPoints[h].set(e,o,s.getLabel());else for(t=this.dim[0]/(this.xLim[1]-this.xLim[0]),i=-this.dim[1]/(this.yLim[1]-this.yLim[0]),h=0;h<n;h++)s=this.points[h],e=(s.getX()-this.xLim[0])*t,o=(s.getY()-this.yLim[0])*i,this.plotPoints[h].set(e,o,s.getLabel())},GLayer.prototype.xPlotToValue=function(t){return this.xLog?Math.exp(Math.log(this.xLim[0])+Math.log(this.xLim[1]/this.xLim[0])*t/this.dim[0]):this.xLim[0]+(this.xLim[1]-this.xLim[0])*t/this.dim[0]},GLayer.prototype.yPlotToValue=function(t){return this.yLog?Math.exp(Math.log(this.yLim[0])-Math.log(this.yLim[1]/this.yLim[0])*t/this.dim[1]):this.yLim[0]-(this.yLim[1]-this.yLim[0])*t/this.dim[1]},GLayer.prototype.plotToValue=function(t,i){return[this.xPlotToValue(t),this.yPlotToValue(i)]},GLayer.prototype.isInside=function(){var t,i,s;if(2===arguments.length)t=arguments[0],i=arguments[1],s=this.isValidNumber(t)&&this.isValidNumber(i);else{if(!(1===arguments.length&&arguments[0]instanceof GPoint))throw new Error("GLayer.isInside(): signature not supported");t=arguments[0].getX(),i=arguments[0].getY(),s=arguments[0].isValid()}return!!s&&(t>=0&&t<=this.dim[0]&&-i>=0&&-i<=this.dim[1])},GLayer.prototype.updateInsideList=function(){for(var t,i=this.plotPoints.length,s=0;s<i;s++)t=this.plotPoints[s],this.inside[s]=!!t.isValid()&&(t.getX()>=0&&t.getX()<=this.dim[0]&&-t.getY()>=0&&-t.getY()<=this.dim[1]);this.inside.length>i&&this.inside.splice(i,Number.MAX_VALUE)},GLayer.prototype.getPointIndexAtPlotPos=function(t,i){var s;if(this.isInside(t,i))for(var e,o,h=Number.MAX_VALUE,n=this.plotPoints.length,r=this.pointSizes.length,a=0;a<n;a++)this.inside[a]&&(e=this.plotPoints[a],o=Math.pow(e.getX()-t,2)+Math.pow(e.getY()-i,2),o<Math.max(Math.pow(this.pointSizes[a%r]/2,2),25)&&o<h&&(h=o,s=a));return s},GLayer.prototype.getPointAtPlotPos=function(t,i){return this.points[this.getPointIndexAtPlotPos(t,i)]},GLayer.prototype.obtainBoxIntersections=function(t,i){var s=0;if(t.isValid()&&i.isValid()){var e=t.getX(),o=t.getY(),h=i.getX(),n=i.getY(),r=this.isInside(e,o),a=this.isInside(h,n),l=r&&a||e<0&&h<0||e>this.dim[0]&&h>this.dim[0]||-o<0&&-n<0||-o>this.dim[1]&&-n>this.dim[1];if(!l){var p=h-e,m=n-o;if(0===p)s=2,this.cuts[0][0]=e,this.cuts[0][1]=0,this.cuts[1][0]=e,this.cuts[1][1]=-this.dim[1];else if(0===m)s=2,this.cuts[0][0]=0,this.cuts[0][1]=o,this.cuts[1][0]=this.dim[0],this.cuts[1][1]=o;else{var L=m/p,c=o-L*e;s=4,this.cuts[0][0]=-c/L,this.cuts[0][1]=0,this.cuts[1][0]=(-this.dim[1]-c)/L,this.cuts[1][1]=-this.dim[1],this.cuts[2][0]=0,this.cuts[2][1]=c,this.cuts[3][0]=this.dim[0],this.cuts[3][1]=c+L*this.dim[0]}if(s=this.getValidCuts(this.cuts,s,t,i),r||a){if(1!==s){var u=r?t:i;s>1&&(s=this.removeDuplicatedCuts(this.cuts,s,0),s>1&&(s=this.removePointFromCuts(this.cuts,s,u,0),s>1&&(s=this.removeDuplicatedCuts(this.cuts,s,.001),s>1&&(s=this.removePointFromCuts(this.cuts,s,u,.001))))),0===s&&(s=1,this.cuts[0][0]=u.getX(),this.cuts[0][1]=u.getY())}}else s>2&&(s=this.removeDuplicatedCuts(this.cuts,s,0),s>2&&(s=this.removeDuplicatedCuts(this.cuts,s,.001))),2===s&&(Math.pow(this.cuts[0][0]-e,2),Math.pow(this.cuts[0][1]-o),2>Math.pow(this.cuts[1][0]-e,2)+Math.pow(this.cuts[1][1]-o,2)&&(this.cuts[2][0]=this.cuts[0][0],this.cuts[2][1]=this.cuts[0][1],this.cuts[0][0]=this.cuts[1][0],this.cuts[0][1]=this.cuts[1][1],this.cuts[1][0]=this.cuts[2][0],this.cuts[1][1]=this.cuts[2][1])),1===s&&(s=2,this.cuts[1][0]=this.cuts[0][0],this.cuts[1][1]=this.cuts[0][1]);(r||a)&&1!==s?console.log("There should be one cut!!!"):r||a||0===s||2===s||console.log("There should be either 0 or 2 cuts!!! "+s+" were found")}}return s},GLayer.prototype.getValidCuts=function(t,i,s,e){for(var o=s.getX(),h=s.getY(),n=e.getX(),r=e.getY(),a=Math.abs(n-o),l=Math.abs(r-h),p=0,m=0;m<i;m++)this.isInside(t[m][0],t[m][1])&&Math.abs(t[m][0]-o)<=a&&Math.abs(t[m][1]-h)<=l&&Math.abs(t[m][0]-n)<=a&&Math.abs(t[m][1]-r)<=l&&(t[p][0]=t[m][0],t[p][1]=t[m][1],p++);return p},GLayer.prototype.removeDuplicatedCuts=function(t,i,s){for(var e,o=0,h=0;h<i;h++){e=!1;for(var n=0;n<o;n++)if(Math.abs(t[n][0]-t[h][0])<=s&&Math.abs(t[n][1]-t[h][1])<=s){e=!0;break}e||(t[o][0]=t[h][0],t[o][1]=t[h][1],o++)}return o},GLayer.prototype.removePointFromCuts=function(t,i,s,e){for(var o=s.getX(),h=s.getY(),n=0,r=0;r<i;r++)(Math.abs(t[r][0]-o)>e||Math.abs(t[r][1]-h)>e)&&(t[n][0]=t[r][0],t[n][1]=t[r][1],n++);return n},GLayer.prototype.startHistogram=function(t){this.hist=new GHistogram(this.parent,t,this.dim,this.plotPoints)},GLayer.prototype.drawPoints=function(){var t,i;if(0===arguments.length){t=this.plotPoints.length;var s=this.pointColors.length,e=this.pointSizes.length;if(this.parent.push(),this.parent.ellipseMode(this.parent.CENTER),this.parent.noStroke(),1===s&&1===e)for(this.parent.fill(this.pointColors[0]),i=0;i<t;i++)this.inside[i]&&this.parent.ellipse(this.plotPoints[i].getX(),this.plotPoints[i].getY(),this.pointSizes[0],this.pointSizes[0]);else if(1===s)for(this.parent.fill(this.pointColors[0]),i=0;i<t;i++)this.inside[i]&&this.parent.ellipse(this.plotPoints[i].getX(),this.plotPoints[i].getY(),this.pointSizes[i%e],this.pointSizes[i%e]);else if(1===e)for(i=0;i<t;i++)this.inside[i]&&(this.parent.fill(this.pointColors[i%s]),this.parent.ellipse(this.plotPoints[i].getX(),this.plotPoints[i].getY(),this.pointSizes[0],this.pointSizes[0]));else for(i=0;i<t;i++)this.inside[i]&&(this.parent.fill(this.pointColors[i%s]),this.parent.ellipse(this.plotPoints[i].getX(),this.plotPoints[i].getY(),this.pointSizes[i%e],this.pointSizes[i%e]));this.parent.pop()}else{if(!(1===arguments.length&&arguments[0]instanceof p5.Image))throw new Error("GLayer.drawPoints(): signature not supported");for(t=this.plotPoints.length,this.parent.push(),this.parent.imageMode(this.parent.CENTER),i=0;i<t;i++)this.inside[i]&&this.parent.image(arguments[0],this.plotPoints[i].getX(),this.plotPoints[i].getY());this.parent.pop()}},GLayer.prototype.drawPoint=function(){var t,i,s,e;if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2];else if(2===arguments.length&&arguments[1]instanceof p5.Image)t=arguments[0],e=arguments[1];else{if(1!==arguments.length)throw new Error("GLayer.drawPoint(): signature not supported");t=arguments[0],i=this.pointColors[0],s=this.pointSizes[0]}var o=this.valueToXPlot(t.getX()),h=this.valueToYPlot(t.getY());this.isInside(o,h)&&(this.parent.push(),void 0!==e?(this.parent.imageMode(this.parent.CENTER),this.parent.image(e,o,h)):(this.parent.ellipseMode(this.parent.CENTER),this.parent.fill(i),this.parent.noStroke(),this.parent.ellipse(o,h,s,s)),this.parent.pop())},GLayer.prototype.drawLines=function(){var t=this.plotPoints.length;this.parent.push(),this.parent.noFill(),this.parent.stroke(this.lineColor),this.parent.strokeWeight(this.lineWidth),this.parent.strokeCap(this.parent.SQUARE);for(var i=0;i<t-1;i++)if(this.inside[i]&&this.inside[i+1])this.parent.line(this.plotPoints[i].getX(),this.plotPoints[i].getY(),this.plotPoints[i+1].getX(),this.plotPoints[i+1].getY());else if(this.plotPoints[i].isValid()&&this.plotPoints[i+1].isValid()){var s=this.obtainBoxIntersections(this.plotPoints[i],this.plotPoints[i+1]);this.inside[i]?this.parent.line(this.plotPoints[i].getX(),this.plotPoints[i].getY(),this.cuts[0][0],this.cuts[0][1]):this.inside[i+1]?this.parent.line(this.cuts[0][0],this.cuts[0][1],this.plotPoints[i+1].getX(),this.plotPoints[i+1].getY()):s>=2&&this.parent.line(this.cuts[0][0],this.cuts[0][1],this.cuts[1][0],this.cuts[1][1])}this.parent.pop()},GLayer.prototype.drawLine=function(){var t,i,s,e,o,h;if(4===arguments.length&&arguments[0]instanceof GPoint)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3];else if(4===arguments.length)o=arguments[0],h=arguments[1],s=arguments[2],e=arguments[3];else if(2===arguments.length&&arguments[0]instanceof GPoint)t=arguments[0],i=arguments[1],s=this.lineColor,e=this.lineWidth;else{if(2!==arguments.length)throw new Error("GLayer.drawLine(): signature not supported");o=arguments[0],h=arguments[1],s=this.lineColor,e=this.lineWidth}void 0!==o&&(this.xLog&&this.yLog?(t=new GPoint(this.xLim[0],Math.pow(10,o*Math.log(this.xLim[0])/Math.LN10+h)),i=new GPoint(this.xLim[1],Math.pow(10,o*Math.log(this.xLim[1])/Math.LN10+h))):this.xLog?(t=new GPoint(this.xLim[0],o*Math.log(this.xLim[0])/Math.LN10+h),i=new GPoint(this.xLim[1],o*Math.log(this.xLim[1])/Math.LN10+h)):this.yLog?(t=new GPoint(this.xLim[0],Math.pow(10,o*this.xLim[0]+h)),i=new GPoint(this.xLim[1],Math.pow(10,o*this.xLim[1]+h))):(t=new GPoint(this.xLim[0],o*this.xLim[0]+h),i=new GPoint(this.xLim[1],o*this.xLim[1]+h)));var n=this.valueToPlot(t),r=this.valueToPlot(i);if(n.isValid()&&r.isValid()){var a=this.isInside(n),l=this.isInside(r);if(this.parent.push(),this.parent.noFill(),this.parent.stroke(s),this.parent.strokeWeight(e),this.parent.strokeCap(this.parent.SQUARE),a&&l)this.parent.line(n.getX(),n.getY(),r.getX(),r.getY());else{var p=this.obtainBoxIntersections(n,r);a?this.parent.line(n.getX(),n.getY(),this.cuts[0][0],this.cuts[0][1]):l?this.parent.line(this.cuts[0][0],this.cuts[0][1],r.getX(),r.getY()):p>=2&&this.parent.line(this.cuts[0][0],this.cuts[0][1],this.cuts[1][0],this.cuts[1][1])}this.parent.pop()}},GLayer.prototype.drawHorizontalLine=function(){var t,i,s;if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2];else{if(1!==arguments.length)throw new Error("GLayer.drawHorizontalLine(): signature not supported");t=arguments[0],i=this.lineColor,s=this.lineWidth}var e=this.valueToYPlot(t);this.isValidNumber(e)&&-e>=0&&-e<=this.dim[1]&&(this.parent.push(),this.parent.noFill(),this.parent.stroke(i),this.parent.strokeWeight(s),this.parent.strokeCap(this.parent.SQUARE),this.parent.line(0,e,this.dim[0],e),this.parent.pop())},GLayer.prototype.drawVerticalLine=function(){var t,i,s;if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2];else{if(1!==arguments.length)throw new Error("GLayer.drawVerticalLine(): signature not supported");t=arguments[0],i=this.lineColor,s=this.lineWidth}var e=this.valueToXPlot(t);this.isValidNumber(e)&&e>=0&&e<=this.dim[0]&&(this.parent.push(),this.parent.noFill(),this.parent.stroke(i),this.parent.strokeWeight(s),this.parent.strokeCap(this.parent.SQUARE),this.parent.line(e,0,e,-this.dim[1]),this.parent.pop())},GLayer.prototype.drawFilledContour=function(t,i){var s;if(t===GPlot.HORIZONTAL?s=this.getHorizontalShape(i):t===GPlot.VERTICAL&&(s=this.getVerticalShape(i)),void 0!==s&&s.length>0){this.parent.push(),this.parent.fill(this.lineColor),this.parent.noStroke(),this.parent.beginShape();for(var e=0;e<s.length;e++)s[e].isValid()&&this.parent.vertex(s[e].getX(),s[e].getY());this.parent.endShape(this.parent.CLOSE),this.parent.pop()}},GLayer.prototype.getHorizontalShape=function(t){for(var i,s,e,o=this.plotPoints.length,h=[],n=-1,r=-1,a=0;a<o;a++)if(i=this.plotPoints[a],i.isValid()){for(s=!1,this.inside[a]?(h.push(new GPoint(i.getX(),i.getY(),"normal point")),s=!0):i.getX()>=0&&i.getX()<=this.dim[0]&&(-i.getY()<0?(h.push(new GPoint(i.getX(),0,"projection")),s=!0):(h.push(new GPoint(i.getX(),-this.dim[1],"projection")),s=!0)),e=a+1;e<o-1&&!this.plotPoints[e].isValid();)e++;if(e<o&&this.plotPoints[e].isValid())for(var l=this.obtainBoxIntersections(i,this.plotPoints[e]),p=0;p<l;p++)h.push(new GPoint(this.cuts[p][0],this.cuts[p][1],"cut")),s=!0;s&&(n<0&&(n=a),r=a)}if(h.length>0){var m=new GPoint(h[0]);if(0!==m.getX()&&m.getX()!==this.dim[0])if("cut"===m.getLabel())this.plotPoints[n].getX()<0?(m.setX(0),m.setLabel("extreme")):(m.setX(this.dim[0]),m.setLabel("extreme"));else if(0!==n){for(var L=n-1;L>0&&!this.plotPoints[L].isValid();)L--;this.plotPoints[L].isValid()&&(this.plotPoints[L].getX()<0?(m.setX(0),m.setLabel("extreme")):(m.setX(this.dim[0]),m.setLabel("extreme")))}var c=new GPoint(h[h.length-1]);if(0!==c.getX()&&c.getX()!==this.dim[0]&&r!==o-1){for(e=r+1;e<o-1&&!this.plotPoints[e].isValid();)e++;this.plotPoints[e].isValid()&&(this.plotPoints[e].getX()<0?(c.setX(0),c.setLabel("extreme")):(c.setX(this.dim[0]),c.setLabel("extreme")))}"extreme"===c.getLabel()&&h.push(c),this.yLog&&t<=0&&(t=Math.min(this.yLim[0],this.yLim[1]));var u=this.valueToPlot(1,t);-u[1]<0?(h.push(new GPoint(c.getX(),0)),h.push(new GPoint(m.getX(),0))):-u[1]>this.dim[1]?(h.push(new GPoint(c.getX(),-this.dim[1])),h.push(new GPoint(m.getX(),-this.dim[1]))):(h.push(new GPoint(c.getX(),u[1])),h.push(new GPoint(m.getX(),u[1]))),"extreme"===m.getLabel()&&h.push(m)}return h},GLayer.prototype.getVerticalShape=function(t){for(var i,s,e,o=this.plotPoints.length,h=[],n=-1,r=-1,a=0;a<o;a++)if(i=this.plotPoints[a],i.isValid()){for(s=!1,this.inside[a]?(h.push(new GPoint(i.getX(),i.getY(),"normal point")),s=!0):-i.getY()>=0&&-i.getY()<=this.dim[1]&&(i.getX()<0?(h.push(new GPoint(0,i.getY(),"projection")),s=!0):(h.push(new GPoint(this.dim[0],i.getY(),"projection")),s=!0)),e=a+1;e<o-1&&!this.plotPoints[e].isValid();)e++;if(e<o&&this.plotPoints[e].isValid())for(var l=this.obtainBoxIntersections(i,this.plotPoints[e]),p=0;p<l;p++)h.push(new GPoint(this.cuts[p][0],this.cuts[p][1],"cut")),s=!0;s&&(n<0&&(n=a),r=a)}if(h.length>0){var m=new GPoint(h[0]);if(0!==m.getY()&&m.getY()!==-this.dim[1])if("cut"===m.getLabel())-this.plotPoints[n].getY()<0?(m.setY(0),m.setLabel("extreme")):(m.setY(-this.dim[1]),m.setLabel("extreme"));else if(0!==n){for(var L=n-1;L>0&&!this.plotPoints[L].isValid();)L--;this.plotPoints[L].isValid()&&(-this.plotPoints[L].getY()<0?(m.setY(0),m.setLabel("extreme")):(m.setY(-this.dim[1]),m.setLabel("extreme")))}var c=new GPoint(h[h.length-1]);if(0!==c.getY()&&c.getY()!==-this.dim[1]&&r!==o-1){for(e=r+1;e<o-1&&!this.plotPoints[e].isValid();)e++;this.plotPoints[e].isValid()&&(-this.plotPoints[e].getY()<0?(c.setY(0),c.setLabel("extreme")):(c.setY(-this.dim[1]),c.setLabel("extreme")))}"extreme"===c.getLabel()&&h.push(c),this.xLog&&t<=0&&(t=Math.min(this.xLim[0],this.xLim[1]));var u=this.valueToPlot(t,1);u[0]<0?(h.push(new GPoint(0,c.getY())),h.push(new GPoint(0,m.getY()))):u[0]>this.dim[0]?(h.push(new GPoint(this.dim[0],c.getY())),h.push(new GPoint(this.dim[0],m.getY()))):(h.push(new GPoint(u[0],c.getY())),h.push(new GPoint(u[0],m.getY()))),"extreme"===m.getLabel()&&h.push(m)}return h},GLayer.prototype.drawLabel=function(t){var i=this.valueToXPlot(t.getX()),s=this.valueToYPlot(t.getY());if(this.isValidNumber(i)&&this.isValidNumber(s)){var e=i+this.labelSeparation[0],o=s-this.labelSeparation[1],h=this.fontSize/4;this.parent.push(),this.parent.rectMode(this.parent.CORNER),this.parent.noStroke(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.textAlign(this.parent.LEFT,this.parent.BOTTOM),this.parent.fill(this.labelBgColor),this.parent.rect(e-h,o-this.fontSize-h,this.parent.textWidth(t.getLabel())+2*h,this.fontSize+2*h),this.parent.fill(this.fontColor),this.parent.text(t.getLabel(),e,o),this.parent.pop()}},GLayer.prototype.drawLabelAtPlotPos=function(t,i){var s=this.getPointAtPlotPos(t,i);void 0!==s&&this.drawLabel(s)},GLayer.prototype.drawHistogram=function(){void 0!==this.hist&&this.hist.draw(this.valueToPlot(this.histBasePoint))},GLayer.prototype.drawPolygon=function(t,i){var s;if(t.length>2){var e,o=this.valueToPlot(t),h=0;for(s=0;s<o.length;s++)o[s].isValid()&&(o[h]=o[s],h++);o.splice(h,Number.MAX_VALUE);var n=o.length,r=[];for(s=0;s<n;s++){e=o[s],this.isInside(e)&&r.push(new GPoint(e.getX(),e.getY(),"normal point"));var a=s+1<n?s+1:0,l=this.obtainBoxIntersections(e,o[a]);1===l?r.push(new GPoint(this.cuts[0][0],this.cuts[0][1],"single cut")):l>1&&(r.push(new GPoint(this.cuts[0][0],this.cuts[0][1],"double cut")),r.push(new GPoint(this.cuts[1][0],this.cuts[1][1],"double cut")))}n=r.length;var p=[];for(s=0;s<n;s++){p.push(r[s]);var m=s+1<n?s+1:0,L=r[s].getLabel(),c=r[m].getLabel(),u="single cut"===L&&"single cut"===c||"single cut"===L&&"double cut"===c||"double cut"===L&&"single cut"===c;if(u){var g=r[s].getX(),d=r[s].getY(),f=r[m].getX(),y=r[m].getY(),P=Math.abs(f-g),x=Math.abs(y-d);if(P>0&&x>0&&P!==this.dim[0]&&x!==this.dim[1]){var v=0===g||g===this.dim[0]?g:f,G=0===d||d===-this.dim[1]?d:y;p.push(new GPoint(v,G,"special cut"))}}}if(p.length>2){for(this.parent.push(),this.parent.fill(i),this.parent.noStroke(),this.parent.beginShape(),s=0;s<p.length;s++)this.parent.vertex(p[s].getX(),p[s].getY());this.parent.endShape(this.parent.CLOSE),this.parent.pop()}}},GLayer.prototype.drawAnnotation=function(t,i,s,e,o){var h=this.valueToXPlot(i),n=this.valueToYPlot(s);this.isValidNumber(h)&&this.isValidNumber(n)&&this.isInside(h,n)&&(e!==this.parent.CENTER&&e!==this.parent.RIGHT&&e!==this.parent.LEFT&&(e=this.parent.LEFT),o!==this.parent.CENTER&&o!==this.parent.TOP&&o!==this.parent.BOTTOM&&(o=this.parent.CENTER),o===this.parent.CENTER&&(o=this.parent.BOTTOM,n+=this.fontSize/2),this.parent.push(),this.parent.textFont(this.fontName),this.parent.textSize(this.fontSize),this.parent.fill(this.fontColor),this.parent.textAlign(e,o),this.parent.text(t,h,n),this.parent.pop())},GLayer.prototype.setDim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GLayer.setDim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t>0&&i>0&&(this.dim[0]=t,this.dim[1]=i,this.updatePlotPoints(),void 0!==this.hist&&(this.hist.setDim(this.dim),this.hist.setPlotPoints(this.plotPoints)))},GLayer.prototype.setXLim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GLayer.setXLim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t!==i&&this.isValidNumber(t)&&this.isValidNumber(i)&&(this.xLog&&(t<=0||i<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.xLim[0]=t,this.xLim[1]=i,this.updatePlotPoints(),this.updateInsideList(),void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints)))},GLayer.prototype.setYLim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GLayer.setYLim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t!==i&&this.isValidNumber(t)&&this.isValidNumber(i)&&(this.yLog&&(t<=0||i<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.yLim[0]=t,this.yLim[1]=i,this.updatePlotPoints(),this.updateInsideList(),void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints)))},GLayer.prototype.setXYLim=function(){var t,i,s,e;if(4===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3];else{if(2!==arguments.length)throw new Error("GLayer.setXYLim(): signature not supported");t=arguments[0][0],i=arguments[0][1],s=arguments[1][0],e=arguments[1][1]}t!==i&&s!==e&&this.isValidNumber(t)&&this.isValidNumber(i)&&this.isValidNumber(s)&&this.isValidNumber(e)&&(this.xLog&&(t<=0||i<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.xLim[0]=t,this.xLim[1]=i),this.yLog&&(s<=0||e<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.yLim[0]=s,this.yLim[1]=e),this.updatePlotPoints(),this.updateInsideList(),void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints))},GLayer.prototype.setLimAndLog=function(){var t,i,s,e,o,h;if(6===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3],o=arguments[4],h=arguments[5];else{if(4!==arguments.length)throw new Error("GLayer.setLimAndLog(): signature not supported");t=arguments[0][0],i=arguments[0][1],s=arguments[1][0],e=arguments[1][1],o=arguments[2],h=arguments[3]}t!==i&&s!==e&&this.isValidNumber(t)&&this.isValidNumber(i)&&this.isValidNumber(s)&&this.isValidNumber(e)&&(o&&(t<=0||i<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.xLim[0]=t,this.yLim[1]=i,this.xLog=o),h&&(s<=0||e<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.yLim[0]=s,this.yLim[1]=e,this.yLog=h),this.updatePlotPoints(),this.updateInsideList(),void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints))},GLayer.prototype.setXLog=function(t){t!==this.xLog&&(t&&(this.xLim[0]<=0||this.xLim[1]<=0)&&(console.log("One of the limits is negative. This is not allowed in logarithmic scale."),console.log("Will set horizontal limits to (0.1, 10)"),this.xLim[0]=.1,this.xLim[1]=10),this.xLog=t,this.updatePlotPoints(),this.updateInsideList(),void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints))},GLayer.prototype.setYLog=function(t){t!==this.yLog&&(t&&(this.yLim[0]<=0||this.yLim[1]<=0)&&(console.log("One of the limits is negative. This is not allowed in logarithmic scale."),console.log("Will set horizontal limits to (0.1, 10)"),this.yLim[0]=.1,this.yLim[1]=10),this.yLog=t,this.updatePlotPoints(),this.updateInsideList(),void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints))},GLayer.prototype.setPoints=function(t){var i,s=t.length;if(this.points.length>s)this.points.splice(s,Number.MAX_VALUE);else for(i=this.points.length;i<s;i++)this.points[i]=new GPoint;for(i=0;i<s;i++)this.points[i].set(t[i]);this.updatePlotPoints(),this.updateInsideList(),void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints)},GLayer.prototype.setPoint=function(){var t,i,s,e,o=this.points.length;if(4===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3];else if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=t<o?this.points[t].getLabel():"";else{if(2!==arguments.length)throw new Error("GLayer.setPoint(): signature not supported");t=arguments[0],i=arguments[1].getX(),s=arguments[1].getY(),e=arguments[1].getLabel()}if(t<o)this.points[t].set(i,s,e),this.plotPoints[t].set(this.valueToXPlot(i),this.valueToYPlot(s),e),this.inside[t]=this.isInside(this.plotPoints[t]);else{if(t!==o)throw new Error("GLayer.setPoint(): the index position is outside the array size");this.points[t]=new GPoint(i,s,e),this.plotPoints[t]=new GPoint(this.valueToXPlot(i),this.valueToYPlot(s),e),this.inside[t]=this.isInside(this.plotPoints[t])}void 0!==this.hist&&this.hist.setPlotPoint(t,this.plotPoints[t])},GLayer.prototype.addPoint=function(){var t,i,s;if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2];else if(2===arguments.length)t=arguments[0],i=arguments[1],s="";else{if(1!==arguments.length)throw new Error("GLayer.addPoint(): signature not supported");t=arguments[0].getX(),i=arguments[0].getY(),s=arguments[0].getLabel()}this.points.push(new GPoint(t,i,s)),this.plotPoints.push(new GPoint(this.valueToXPlot(t),this.valueToYPlot(i),s)),this.inside.push(this.isInside(this.plotPoints[this.plotPoints.length-1])),void 0!==this.hist&&this.hist.addPlotPoint(this.plotPoints[this.plotPoints.length-1])},GLayer.prototype.addPoints=function(t){for(var i,s=t.length,e=0;e<s;e++)i=t[e],this.points.push(new GPoint(i)),this.plotPoints.push(new GPoint(this.valueToXPlot(i.getX()),this.valueToYPlot(i.getY()),i.getLabel())),this.inside.push(this.isInside(this.plotPoints[this.plotPoints.length-1]));void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints)},GLayer.prototype.addPointAtIndexPos=function(){var t,i,s,e;if(4===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3];else if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e="";else{if(2!==arguments.length)throw new Error("GLayer.addPointAtIndexPos(): signature not supported");t=arguments[0],i=arguments[1].getX(),s=arguments[1].getY(),e=arguments[1].getLabel()}t<=this.points.length&&(this.points.splice(t,0,new GPoint(i,s,e)),this.plotPoints.splice(t,0,new GPoint(this.valueToXPlot(i),this.valueToYPlot(s),e)),this.inside.splice(t,0,this.isInside(this.plotPoints[t])),void 0!==this.hist&&this.hist.setPlotPoints(this.plotPoints))},GLayer.prototype.removePoint=function(t){t<this.points.length&&(this.points.splice(t,1),this.plotPoints.splice(t,1),this.inside.splice(t,1),void 0!==this.hist&&this.hist.removePlotPoint(t))},GLayer.prototype.setInside=function(t){t.length===this.inside.length&&(this.inside=t.slice())},GLayer.prototype.setPointColors=function(t){t.length>0&&(this.pointColors=t.slice())},GLayer.prototype.setPointColor=function(t){this.pointColors=[t]},GLayer.prototype.setPointSizes=function(t){t.length>0&&(this.pointSizes=t.slice())},GLayer.prototype.setPointSize=function(t){this.pointSizes=[t]},GLayer.prototype.setLineColor=function(t){this.lineColor=t},GLayer.prototype.setLineWidth=function(t){t>0&&(this.lineWidth=t)},GLayer.prototype.setHistBasePoint=function(t){this.histBasePoint.set(t)},GLayer.prototype.setHistType=function(t){void 0!==this.hist&&this.hist.setType(t)},GLayer.prototype.setHistVisible=function(t){void 0!==this.hist&&this.hist.setVisible(t)},GLayer.prototype.setDrawHistLabels=function(t){void 0!==this.hist&&this.hist.setDrawLabels(t)},GLayer.prototype.setLabelBgColor=function(t){this.labelBgColor=t},GLayer.prototype.setLabelSeparation=function(t){this.labelSeparation[0]=t[0],this.labelSeparation[1]=t[1]},GLayer.prototype.setFontName=function(t){this.fontName=t},GLayer.prototype.setFontColor=function(t){this.fontColor=t},GLayer.prototype.setFontSize=function(t){t>0&&(this.fontSize=t)},GLayer.prototype.setFontProperties=function(t,i,s){s>0&&(this.fontName=t,this.fontColor=i,this.fontSize=s)},GLayer.prototype.setAllFontProperties=function(t,i,s){this.setFontProperties(t,i,s),void 0!==this.hist&&this.hist.setFontProperties(t,i,s)},GLayer.prototype.getId=function(){return this.id},GLayer.prototype.getDim=function(){return this.dim.slice()},GLayer.prototype.getXLim=function(){return this.xLim.slice()},GLayer.prototype.getYLim=function(){return this.yLim.slice()},GLayer.prototype.getXLog=function(){return this.xLog},GLayer.prototype.getYLog=function(){return this.yLog},GLayer.prototype.getPoints=function(){for(var t=[],i=0;i<this.points.length;i++)t[i]=new GPoint(this.points[i]);return t},GLayer.prototype.getPointsRef=function(){return this.points},GLayer.prototype.getPointColors=function(){return this.pointColors.slice()},GLayer.prototype.getPointSizes=function(){return this.pointSizes.slice()},GLayer.prototype.getLineColor=function(){return this.lineColor},GLayer.prototype.getLineWidth=function(){return this.lineWidth},GLayer.prototype.getHistogram=function(){return this.hist},GPlot.MAINLAYERID="main layer",GPlot.VERTICAL=0,
GPlot.HORIZONTAL=1,GPlot.BOTH=2,GPlot.NONE=0,GPlot.prototype.addLayer=function(){var t,i;if(2===arguments.length)t=arguments[0],i=new GLayer(this.parent,t,this.dim,this.xLim,this.yLim,this.xLog,this.yLog),i.setPoints(arguments[1]);else{if(1!==arguments.length)throw new Error("GPlot.addLayer(): signature not supported");t=arguments[0].getId(),i=arguments[0]}var s=!1;if(this.mainLayer.isId(t))s=!0;else for(var e=0;e<this.layerList.length;e++)if(this.layerList[e].isId(t)){s=!0;break}s?console.log("A layer with the same id exists. Please change the id and try to add it again."):(i.setDim(this.dim),i.setLimAndLog(this.xLim,this.yLim,this.xLog,this.yLog),this.layerList.push(i),this.includeAllLayersInLim&&this.updateLimits())},GPlot.prototype.removeLayer=function(t){for(var i,s=0;s<this.layerList.length;s++)if(this.layerList[s].isId(t)){i=s;break}void 0!==i?(this.layerList.splice(i,1),this.includeAllLayersInLim&&this.updateLimits()):console.log("Couldn't find a layer in the plot with id = "+t)},GPlot.prototype.getPlotPosAt=function(t,i){var s=t-(this.pos[0]+this.mar[1]),e=i-(this.pos[1]+this.mar[2]+this.dim[1]);return[s,e]},GPlot.prototype.getScreenPosAtValue=function(t,i){var s=this.mainLayer.valueToXPlot(t)+(this.pos[0]+this.mar[1]),e=this.mainLayer.valueToYPlot(i)+(this.pos[1]+this.mar[2]+this.dim[1]);return[s,e]},GPlot.prototype.getPointAt=function(){var t,i,s;if(3===arguments.length)t=arguments[0],i=arguments[1],s=this.getLayer(arguments[2]);else{if(2!==arguments.length)throw new Error("GPlot.getPointAt(): signature not supported");t=arguments[0],i=arguments[1],s=this.mainLayer}var e=this.getPlotPosAt(t,i);return s.getPointAtPlotPos(e[0],e[1])},GPlot.prototype.addPointAt=function(){var t,i,s;if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2];else{if(2!==arguments.length)throw new Error("GPlot.addPointAt(): signature not supported");t=arguments[0],i=arguments[1],s=GPlot.MAINLAYERID}var e=this.getValueAt(t,i);this.addPoint(e[0],e[1],"",s)},GPlot.prototype.removePointAt=function(){var t,i,s;if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2];else{if(2!==arguments.length)throw new Error("GPlot.removePointAt(): signature not supported");t=arguments[0],i=arguments[1],s=GPlot.MAINLAYERID}var e=this.getPlotPosAt(t,i),o=this.getLayer(s).getPointIndexAtPlotPos(e[0],e[1]);void 0!==o&&this.removePoint(o,s)},GPlot.prototype.getValueAt=function(t,i){var s=this.getPlotPosAt(t,i);return this.mainLayer.plotToValue(s[0],s[1])},GPlot.prototype.getRelativePlotPosAt=function(t,i){var s=this.getPlotPosAt(t,i);return[s[0]/this.dim[0],-s[1]/this.dim[1]]},GPlot.prototype.isOverPlot=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(0!==arguments.length)throw new Error("GPlot.isOverPlot(): signature not supported");t=this.parent.mouseX,i=this.parent.mouseY}return t>=this.pos[0]&&t<=this.pos[0]+this.outerDim[0]&&i>=this.pos[1]&&i<=this.pos[1]+this.outerDim[1]},GPlot.prototype.isOverBox=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(0!==arguments.length)throw new Error("GPlot.isOverBox(): signature not supported");t=this.parent.mouseX,i=this.parent.mouseY}return t>=this.pos[0]+this.mar[1]&&t<=this.pos[0]+this.outerDim[0]-this.mar[3]&&i>=this.pos[1]+this.mar[2]&&i<=this.pos[1]+this.outerDim[1]-this.mar[0]},GPlot.prototype.updateLimits=function(){this.fixedXLim||(this.xLim=this.calculatePlotXLim(),this.xAxis.setLim(this.xLim),this.topAxis.setLim(this.xLim)),this.fixedYLim||(this.yLim=this.calculatePlotYLim(),this.yAxis.setLim(this.yLim),this.rightAxis.setLim(this.yLim)),this.mainLayer.setXYLim(this.xLim,this.yLim);for(var t=0;t<this.layerList.length;t++)this.layerList[t].setXYLim(this.xLim,this.yLim)},GPlot.prototype.calculatePlotXLim=function(){var t=this.calculatePointsXLim(this.mainLayer.getPointsRef());if(this.includeAllLayersInLim)for(var i=0;i<this.layerList.length;i++){var s=this.calculatePointsXLim(this.layerList[i].getPointsRef());void 0!==s&&(void 0!==t?(t[0]=Math.min(t[0],s[0]),t[1]=Math.max(t[1],s[1])):t=s)}if(void 0!==t){var e=0===t[0]?.1:.1*t[0];this.xLog?(t[0]!==t[1]&&(e=Math.exp(this.expandLimFactor*Math.log(t[1]/t[0]))),t[0]=t[0]/e,t[1]=t[1]*e):(t[0]!==t[1]&&(e=this.expandLimFactor*(t[1]-t[0])),t[0]=t[0]-e,t[1]=t[1]+e)}else t=this.xLog&&(this.xLim[0]<=0||this.xLim[1]<=0)?[.1,10]:this.xLim.slice();return this.invertedXScale&&t[0]<t[1]&&(t=[t[1],t[0]]),t},GPlot.prototype.calculatePlotYLim=function(){var t=this.calculatePointsYLim(this.mainLayer.getPointsRef());if(this.includeAllLayersInLim)for(var i=0;i<this.layerList.length;i++){var s=this.calculatePointsYLim(this.layerList[i].getPointsRef());void 0!==s&&(void 0!==t?(t[0]=Math.min(t[0],s[0]),t[1]=Math.max(t[1],s[1])):t=s)}if(void 0!==t){var e=0===t[0]?.1:.1*t[0];this.yLog?(t[0]!==t[1]&&(e=Math.exp(this.expandLimFactor*Math.log(t[1]/t[0]))),t[0]=t[0]/e,t[1]=t[1]*e):(t[0]!==t[1]&&(e=this.expandLimFactor*(t[1]-t[0])),t[0]=t[0]-e,t[1]=t[1]+e)}else t=this.yLog&&(this.yLim[0]<=0||this.yLim[1]<=0)?[.1,10]:this.yLim.slice();return this.invertedYScale&&t[0]<t[1]&&(t=[t[1],t[0]]),t},GPlot.prototype.calculatePointsXLim=function(t){for(var i=[Number.MAX_VALUE,-Number.MAX_VALUE],s=0;s<t.length;s++)if(t[s].isValid()){var e=t[s].getX(),o=t[s].getY(),h=!0;this.fixedYLim&&(h=this.yLim[1]>=this.yLim[0]&&o>=this.yLim[0]&&o<=this.yLim[1]||this.yLim[1]<this.yLim[0]&&o<=this.yLim[0]&&o>=this.yLim[1]),!h||this.xLog&&e<=0||(e<i[0]&&(i[0]=e),e>i[1]&&(i[1]=e))}return i[1]<i[0]&&(i=void 0),i},GPlot.prototype.calculatePointsYLim=function(t){for(var i=[Number.MAX_VALUE,-Number.MAX_VALUE],s=0;s<t.length;s++)if(t[s].isValid()){var e=t[s].getX(),o=t[s].getY(),h=!0;this.fixedXLim&&(h=this.xLim[1]>=this.xLim[0]&&e>=this.xLim[0]&&e<=this.xLim[1]||this.xLim[1]<this.xLim[0]&&e<=this.xLim[0]&&e>=this.xLim[1]),!h||this.yLog&&o<=0||(o<i[0]&&(i[0]=o),o>i[1]&&(i[1]=o))}return i[1]<i[0]&&(i=void 0),i},GPlot.prototype.moveHorizontalAxesLim=function(t){var i;this.xLog?(i=Math.exp(Math.log(this.xLim[1]/this.xLim[0])*t/this.dim[0]),this.xLim[0]*=i,this.xLim[1]*=i):(i=(this.xLim[1]-this.xLim[0])*t/this.dim[0],this.xLim[0]+=i,this.xLim[1]+=i),this.fixedXLim=!0,this.fixedYLim=!0,this.xAxis.moveLim(this.xLim),this.topAxis.moveLim(this.xLim),this.updateLimits()},GPlot.prototype.moveVerticalAxesLim=function(t){var i;this.yLog?(i=Math.exp(Math.log(this.yLim[1]/this.yLim[0])*t/this.dim[1]),this.yLim[0]*=i,this.yLim[1]*=i):(i=(this.yLim[1]-this.yLim[0])*t/this.dim[1],this.yLim[0]+=i,this.yLim[1]+=i),this.fixedXLim=!0,this.fixedYLim=!0,this.yAxis.moveLim(this.yLim),this.rightAxis.moveLim(this.yLim),this.updateLimits()},GPlot.prototype.centerAndZoom=function(t,i,s){var e;this.xLog?(e=Math.exp(Math.log(this.xLim[1]/this.xLim[0])/(2*t)),this.xLim=[i/e,i*e]):(e=(this.xLim[1]-this.xLim[0])/(2*t),this.xLim=[i-e,i+e]),this.yLog?(e=Math.exp(Math.log(this.yLim[1]/this.yLim[0])/(2*t)),this.yLim=[s/e,s*e]):(e=(this.yLim[1]-this.yLim[0])/(2*t),this.yLim=[s-e,s+e]),this.fixedXLim=!0,this.fixedYLim=!0,this.xAxis.setLim(this.xLim),this.topAxis.setLim(this.xLim),this.yAxis.setLim(this.yLim),this.rightAxis.setLim(this.yLim),this.updateLimits()},GPlot.prototype.zoom=function(){var t,i,s;if(3===arguments.length){t=arguments[0];var e=arguments[1],o=arguments[2],h=this.getPlotPosAt(e,o),n=this.mainLayer.plotToValue(h[0],h[1]);this.xLog?(i=Math.exp(Math.log(this.xLim[1]/this.xLim[0])/(2*t)),s=Math.exp(Math.log(this.xLim[1]/this.xLim[0])/t*(.5-h[0]/this.dim[0])),this.xLim=[n[0]*s/i,n[0]*s*i]):(i=(this.xLim[1]-this.xLim[0])/(2*t),s=2*i*(.5-h[0]/this.dim[0]),this.xLim=[n[0]+s-i,n[0]+s+i]),this.yLog?(i=Math.exp(Math.log(this.yLim[1]/this.yLim[0])/(2*t)),s=Math.exp(Math.log(this.yLim[1]/this.yLim[0])/t*(.5+h[1]/this.dim[1])),this.yLim=[n[1]*s/i,n[1]*s*i]):(i=(this.yLim[1]-this.yLim[0])/(2*t),s=2*i*(.5+h[1]/this.dim[1]),this.yLim=[n[1]+s-i,n[1]+s+i]),this.fixedXLim=!0,this.fixedYLim=!0,this.xAxis.setLim(this.xLim),this.topAxis.setLim(this.xLim),this.yAxis.setLim(this.yLim),this.rightAxis.setLim(this.yLim),this.updateLimits()}else{if(1!==arguments.length)throw new Error("GPlot.zoom(): signature not supported");t=arguments[0];var r=this.mainLayer.plotToValue(this.dim[0]/2,-this.dim[1]/2);this.centerAndZoom(t,r[0],r[1])}},GPlot.prototype.shiftPlotPos=function(t,i){var s,e=t[0]-i[0],o=t[1]-i[1];this.xLog?(s=Math.exp(Math.log(this.xLim[1]/this.xLim[0])*e/this.dim[0]),this.xLim=[this.xLim[0]*s,this.xLim[1]*s]):(s=(this.xLim[1]-this.xLim[0])*e/this.dim[0],this.xLim=[this.xLim[0]+s,this.xLim[1]+s]),this.yLog?(s=Math.exp(-Math.log(this.yLim[1]/this.yLim[0])*o/this.dim[1]),this.yLim=[this.yLim[0]*s,this.yLim[1]*s]):(s=-(this.yLim[1]-this.yLim[0])*o/this.dim[1],this.yLim=[this.yLim[0]+s,this.yLim[1]+s]),this.fixedXLim=!0,this.fixedYLim=!0,this.xAxis.moveLim(this.xLim),this.topAxis.moveLim(this.xLim),this.yAxis.moveLim(this.yLim),this.rightAxis.moveLim(this.yLim),this.updateLimits()},GPlot.prototype.align=function(){var t,i,s,e;if(4===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3];else{if(3!==arguments.length)throw new Error("GPlot.align(): signature not supported");t=arguments[0][0],i=arguments[0][1],s=arguments[1],e=arguments[2]}var o=this.mainLayer.valueToPlot(t,i),h=this.getPlotPosAt(s,e);this.shiftPlotPos(o,h)},GPlot.prototype.center=function(t,i){var s=this.getPlotPosAt(t,i),e=[this.dim[0]/2,-this.dim[1]/2];this.shiftPlotPos(s,e)},GPlot.prototype.startHistograms=function(t){this.mainLayer.startHistogram(t);for(var i=0;i<this.layerList.length;i++)this.layerList[i].startHistogram(t)},GPlot.prototype.defaultDraw=function(){this.beginDraw(),this.drawBackground(),this.drawBox(),this.drawXAxis(),this.drawYAxis(),this.drawTitle(),this.drawLines(),this.drawPoints(),this.endDraw()},GPlot.prototype.beginDraw=function(){this.parent.push(),this.parent.translate(this.pos[0]+this.mar[1],this.pos[1]+this.mar[2]+this.dim[1])},GPlot.prototype.endDraw=function(){this.parent.pop()},GPlot.prototype.drawBackground=function(){this.parent.push(),this.parent.rectMode(this.parent.CORNER),this.parent.fill(this.bgColor),this.parent.noStroke(),this.parent.rect(-this.mar[1],-this.mar[2]-this.dim[1],this.outerDim[0],this.outerDim[1]),this.parent.pop()},GPlot.prototype.drawLimits=function(){this.parent.push(),this.parent.rectMode(this.parent.CORNER),this.parent.fill(this.bgColor),this.parent.noStroke(),this.parent.rect(-this.mar[1],-this.dim[1],this.outerDim[0],-this.outerDim[1]),this.parent.rect(-this.mar[1],-this.outerDim[1],this.mar[0],this.outerDim[1]+this.mar[1]),this.parent.rect(-this.mar[1],this.mar[0],this.outerDim[1],1-this.mar[0]),this.parent.pop()},GPlot.prototype.drawBox=function(){this.parent.push(),this.parent.rectMode(this.parent.CORNER),this.parent.fill(this.boxBgColor),this.parent.stroke(this.boxLineColor),this.parent.strokeWeight(this.boxLineWidth),this.parent.strokeCap(this.parent.SQUARE),this.parent.rect(0,-this.dim[1],this.dim[0],this.dim[1]),this.parent.pop()},GPlot.prototype.drawXAxis=function(){this.xAxis.draw()},GPlot.prototype.drawYAxis=function(){this.yAxis.draw()},GPlot.prototype.drawTopAxis=function(){this.topAxis.draw()},GPlot.prototype.drawRightAxis=function(){this.rightAxis.draw()},GPlot.prototype.drawTitle=function(){this.title.draw()},GPlot.prototype.drawPoints=function(){var t;if(1===arguments.length)for(this.mainLayer.drawPoints(arguments[0]),t=0;t<this.layerList.length;t++)this.layerList[0].drawPoints(arguments[0]);else{if(0!==arguments.length)throw new Error("GPlot.drawPoints(): signature not supported");for(this.mainLayer.drawPoints(),t=0;t<this.layerList.length;t++)this.layerList[t].drawPoints()}},GPlot.prototype.drawPoint=function(){if(3===arguments.length)this.mainLayer.drawPoint(arguments[0],arguments[1],arguments[2]);else if(2===arguments.length)this.mainLayer.drawPoint(arguments[0],arguments[1]);else{if(1!==arguments.length)throw new Error("GPlot.drawPoint(): signature not supported");this.mainLayer.drawPoint(arguments[0])}},GPlot.prototype.drawLines=function(){this.mainLayer.drawLines();for(var t=0;t<this.layerList.length;t++)this.layerList[t].drawLines()},GPlot.prototype.drawLine=function(){if(4===arguments.length)this.mainLayer.drawLine(arguments[0],arguments[1],arguments[2],arguments[3]);else{if(2!==arguments.length)throw new Error("GPlot.drawLine(): signature not supported");this.mainLayer.drawLine(arguments[0],arguments[1])}},GPlot.prototype.drawHorizontalLine=function(){if(3===arguments.length)this.mainLayer.drawHorizontalLine(arguments[0],arguments[1],arguments[2]);else{if(1!==arguments.length)throw new Error("GPlot.drawHorizontalLine(): signature not supported");this.mainLayer.drawHorizontalLine(arguments[0])}},GPlot.prototype.drawVerticalLine=function(){if(3===arguments.length)this.mainLayer.drawVerticalLine(arguments[0],arguments[1],arguments[2]);else{if(1!==arguments.length)throw new Error("GPlot.drawVerticalLine(): signature not supported");this.mainLayer.drawVerticalLine(arguments[0])}},GPlot.prototype.drawFilledContours=function(t,i){this.mainLayer.drawFilledContour(t,i);for(var s=0;s<this.layerList.length;s++)this.layerList[s].drawFilledContour(t,i)},GPlot.prototype.drawLabel=function(t){this.mainLayer.drawLabel(t)},GPlot.prototype.drawLabelsAt=function(t,i){var s=this.getPlotPosAt(t,i);this.mainLayer.drawLabelAtPlotPos(s[0],s[1]);for(var e=0;e<this.layerList.length;e++)this.layerList[e].drawLabelAtPlotPos(s[0],s[1])},GPlot.prototype.drawLabels=function(){this.labelingIsActive&&void 0!==this.mousePos&&this.drawLabelsAt(this.mousePos[0],this.mousePos[1])},GPlot.prototype.drawGridLines=function(t){var i;if(this.parent.push(),this.parent.noFill(),this.parent.strokeWeight(this.gridLineWidth),this.parent.strokeCap(this.parent.SQUARE),t===GPlot.BOTH||t===GPlot.VERTICAL){var s=this.xAxis.getPlotTicksRef();for(this.parent.stroke(this.gridLineColor),i=0;i<s.length;i++)s[i]>=0&&s[i]<=this.dim[0]&&this.parent.line(s[i],0,s[i],-this.dim[1]);for(this.parent.stroke(this.gridLineColor2),i=0;i<s.length+1;i++)s[i]>=0&&s[i]<=this.dim[0]&&this.parent.line((s[i]+s[i+1])/2,0,(s[i]+s[i+1])/2,-this.dim[1])}if(t===GPlot.BOTH||t===GPlot.HORIZONTAL){var e=this.yAxis.getPlotTicksRef();for(this.parent.stroke(this.gridLineColor),i=0;i<e.length;i++)-e[i]>=0&&-e[i]<=this.dim[1]&&this.parent.line(0,e[i],this.dim[0],e[i]);for(this.parent.stroke(this.gridLineColor2),i=0;i<e.length;i++)-e[i]>=0&&-e[i]<=this.dim[1]&&this.parent.line(0,(e[i]+e[i+1])/2,this.dim[0],(e[i]+e[i+1])/2)}this.parent.pop()},GPlot.prototype.drawHistograms=function(){this.mainLayer.drawHistogram();for(var t=0;t<this.layerList.length;t++)this.layerList[t].drawHistogram()},GPlot.prototype.drawPolygon=function(t,i){this.mainLayer.drawPolygon(t,i)},GPlot.prototype.drawAnnotation=function(t,i,s,e,o){this.mainLayer.drawAnnotation(t,i,s,e,o)},GPlot.prototype.drawLegend=function(t,i,s){var e=14;this.parent.push(),this.parent.rectMode(this.parent.CENTER),this.parent.noStroke();for(var o=0;o<t.length;o++){var h=[i[o]*this.dim[0],-s[o]*this.dim[1]],n=this.mainLayer.plotToValue(h[0]+e,h[1]);0===o?(this.parent.fill(this.mainLayer.getLineColor()),this.parent.rect(h[0],h[1],e,e),this.mainLayer.drawAnnotation(t[o],n[0],n[1],this.parent.LEFT,this.parent.CENTER)):(this.parent.fill(this.layerList[o-1].getLineColor()),this.parent.rect(h[0],h[1],e,e),this.layerList[o-o].drawAnnotation(t[o],n[0],n[1],this.parent.LEFT,this.parent.CENTER))}this.parent.pop()},GPlot.prototype.setPos=function(){if(2===arguments.length)this.pos[0]=arguments[0],this.pos[1]=arguments[1];else{if(1!==arguments.length)throw new Error("GPlot.setPos(): signature not supported");this.pos[0]=arguments[0][0],this.pos[1]=arguments[0][1]}},GPlot.prototype.setOuterDim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GPlot.setOuterDim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}if(t>0&&i>0){var s=t-this.mar[1]-this.mar[3],e=i-this.mar[0]-this.mar[2];if(s>0&&e>0){this.outerDim[0]=t,this.outerDim[1]=i,this.dim[0]=s,this.dim[1]=e,this.xAxis.setDim(this.dim),this.topAxis.setDim(this.dim),this.yAxis.setDim(this.dim),this.rightAxis.setDim(this.dim),this.title.setDim(this.dim),this.mainLayer.setDim(this.dim);for(var o=0;o<this.layerList.lenght;o++)this.layerList[o].setDim(this.dim)}}},GPlot.prototype.setMar=function(){var t,i,s,e;if(4===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3];else{if(1!==arguments.length)throw new Error("GPlot.setMar(): signature not supported");t=arguments[0][0],i=arguments[0][1],s=arguments[0][2],e=arguments[0][3]}var o=this.dim[0]+i+e,h=this.dim[1]+t+s;o>0&&h>0&&(this.mar[0]=t,this.mar[1]=i,this.mar[2]=s,this.mar[3]=e,this.outerDim[0]=o,this.outerDim[1]=h)},GPlot.prototype.setDim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GPlot.setDim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}if(t>0&&i>0){var s=t+this.mar[1]+this.mar[3],e=i+this.mar[0]+this.mar[2];if(s>0&&e>0){this.outerDim[0]=s,this.outerDim[1]=e,this.dim[0]=t,this.dim[1]=i,this.xAxis.setDim(this.dim),this.topAxis.setDim(this.dim),this.yAxis.setDim(this.dim),this.rightAxis.setDim(this.dim),this.title.setDim(this.dim),this.mainLayer.setDim(this.dim);for(var o=0;o<this.layerList.length;o++)this.layerList[o].setDim(this.dim)}}},GPlot.prototype.setXLim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GPlot.setXLim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t!==i&&(this.xLog&&(t<=0||i<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.xLim[0]=t,this.xLim[1]=i,this.invertedXScale=this.xLim[0]>this.xLim[1],this.fixedXLim=!0,this.xAxis.setLim(this.xLim),this.topAxis.setLim(this.xLim),this.updateLimits()))},GPlot.prototype.setYLim=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else{if(1!==arguments.length)throw new Error("GPlot.setYLim(): signature not supported");t=arguments[0][0],i=arguments[0][1]}t!==i&&(this.yLog&&(t<=0||i<=0)?console.log("One of the limits is negative. This is not allowed in logarithmic scale."):(this.yLim[0]=t,this.yLim[1]=i,this.invertedYScale=this.yLim[0]>this.yLim[1],this.fixedYLim=!0,this.yAxis.setLim(this.yLim),this.rightAxis.setLim(this.yLim),this.updateLimits()))},GPlot.prototype.setFixedXLim=function(t){this.fixedXLim=t,this.updateLimits()},GPlot.prototype.setFixedYLim=function(t){this.fixedYLim=t,this.updateLimits()},GPlot.prototype.setLogScale=function(t){var i=this.xLog,s=this.yLog;if("xy"===t||"yx"===t?(i=!0,s=!0):"x"===t?(i=!0,s=!1):"y"===t?(i=!1,s=!0):""===t&&(i=!1,s=!1),i!==this.xLog||s!==this.yLog){this.xLog=i,this.yLog=s,this.xLog&&this.fixedXLim&&(this.xLim[0]<=0||this.xLim[1]<=0)&&(this.fixedXLim=!1),this.yLog&&this.fixedYLim&&(this.yLim[0]<=0||this.yLim[1]<=0)&&(this.fixedYLim=!1),this.fixedXLim||(this.xLim=this.calculatePlotXLim()),this.fixedYLim||(this.yLim=this.calculatePlotYLim()),this.xAxis.setLimAndLog(this.xLim,this.xLog),this.topAxis.setLimAndLog(this.xLim,this.xLog),this.yAxis.setLimAndLog(this.yLim,this.yLog),this.rightAxis.setLimAndLog(this.yLim,this.yLog),this.mainLayer.setLimAndLog(this.xLim,this.yLim,this.xLog,this.yLog);for(var e=0;e<this.layerList.length;e++)this.layerList[e].setLimAndLog(this.xLim,this.yLim,this.xLog,this.yLog)}},GPlot.prototype.setInvertedXScale=function(t){if(t!==this.invertedXScale){this.invertedXScale=t;var i=this.xLim[0];this.xLim[0]=this.xLim[1],this.xLim[1]=i,this.xAxis.setLim(this.xLim),this.topAxis.setLim(this.xLim),this.mainLayer.setXLim(this.xLim);for(var s=0;s<this.layerList.length;s++)this.layerList[s].setXLim(this.xLim)}},GPlot.prototype.invertXScale=function(){this.setInvertedXScale(!this.invertedXScale)},GPlot.prototype.setInvertedYScale=function(t){if(t!==this.invertedYScale){this.invertedYScale=t;var i=this.yLim[0];this.yLim[0]=this.yLim[1],this.yLim[1]=i,this.yAxis.setLim(this.yLim),this.rightAxis.setLim(this.yLim),this.mainLayer.setYLim(this.yLim);for(var s=0;s<this.layerList.length;s++)this.layerList[s].setYLim(this.yLim)}},GPlot.prototype.invertYScale=function(){this.setInvertedYScale(!this.invertedYScale)},GPlot.prototype.setIncludeAllLayersInLim=function(t){t!==this.includeAllLayersInLim&&(this.includeAllLayersInLim=t,this.updateLimits())},GPlot.prototype.setExpandLimFactor=function(t){t>=0&&t!==this.expandLimFactor&&(this.expandLimFactor=t,this.updateLimits())},GPlot.prototype.setBgColor=function(t){this.bgColor=t},GPlot.prototype.setBoxBgColor=function(t){this.boxBgColor=t},GPlot.prototype.setBoxLineColor=function(t){this.boxLineColor=t},GPlot.prototype.setBoxLineWidth=function(t){t>0&&(this.boxLineWidth=t)},GPlot.prototype.setGridLineColor=function(t){this.gridLineColor=t},GPlot.prototype.setGridLineWidth=function(t){t>0&&(this.gridLineWidth=t)},GPlot.prototype.setPoints=function(){if(2===arguments.length)this.getLayer(arguments[1]).setPoints(arguments[0]);else{if(1!==arguments.length)throw new Error("GPlot.setPoints(): signature not supported");this.mainLayer.setPoints(arguments[0])}this.updateLimits()},GPlot.prototype.setPoint=function(){if(5===arguments.length)this.getLayer(arguments[4]).setPoint(arguments[0],arguments[1],arguments[2],arguments[3]);else if(4===arguments.length)this.mainLayer.setPoint(arguments[0],arguments[1],arguments[2],arguments[3]);else if(3===arguments.length&&arguments[1]instanceof GPoint)this.getLayer(arguments[2]).setPoint(arguments[0],arguments[1]);else if(3===arguments.length)this.mainLayer.setPoint(arguments[0],arguments[1],arguments[2]);else{if(2!==arguments.length)throw new Error("GPlot.setPoint(): signature not supported");this.mainLayer.setPoint(arguments[0],arguments[1])}this.updateLimits()},GPlot.prototype.addPoint=function(){if(4===arguments.length)this.getLayer(arguments[3]).addPoint(arguments[0],arguments[1],arguments[2]);else if(3===arguments.length)this.mainLayer.addPoint(arguments[0],arguments[1],arguments[2]);else if(2===arguments.length&&arguments[0]instanceof GPoint)this.getLayer(arguments[1]).addPoint(arguments[0]);else if(2===arguments.length)this.mainLayer.addPoint(arguments[0],arguments[1]);else{if(1!==arguments.length)throw new Error("GPlot.addPoint(): signature not supported");this.mainLayer.addPoint(arguments[0])}this.updateLimits()},GPlot.prototype.addPoints=function(){if(2===arguments.length)this.getLayer(arguments[1]).addPoints(arguments[0]);else{if(1!==arguments.length)throw new Error("GPlot.addPoints(): signature not supported");this.mainLayer.addPoints(arguments[0])}this.updateLimits()},GPlot.prototype.removePoint=function(){if(2===arguments.length)this.getLayer(arguments[1]).removePoint(arguments[0]);else{if(1!==arguments.length)throw new Error("GPlot.removePoint(): signature not supported");this.mainLayer.removePoint(arguments[0])}this.updateLimits()},GPlot.prototype.addPointAtIndexPos=function(){if(5===arguments.length)this.getLayer(arguments[4]).addPointAtIndexPos(arguments[0],arguments[1],arguments[2],arguments[3]);else if(4===arguments.length)this.mainLayer.addPointAtIndexPos(arguments[0],arguments[1],arguments[2],arguments[3]);else if(3===arguments.length&&arguments[1]instanceof GPoint)this.getLayer(arguments[2]).addPointAtIndexPos(arguments[0],arguments[1]);else if(3===arguments.length)this.mainLayer.addPointAtIndexPos(arguments[0],arguments[1],arguments[2]);else{if(2!==arguments.length)throw new Error("GPlot.addPointAtIndexPos(): signature not supported");this.mainLayer.addPointAtIndexPos(arguments[0],arguments[1])}this.updateLimits()},GPlot.prototype.setPointColors=function(t){this.mainLayer.setPointColors(t)},GPlot.prototype.setPointColor=function(t){this.mainLayer.setPointColor(t)},GPlot.prototype.setPointSizes=function(t){this.mainLayer.setPointSizes(t)},GPlot.prototype.setPointSize=function(t){this.mainLayer.setPointSize(t)},GPlot.prototype.setLineColor=function(t){this.mainLayer.setLineColor(t)},GPlot.prototype.setLineWidth=function(t){this.mainLayer.setLineWidth(t)},GPlot.prototype.setHistBasePoint=function(t){this.mainLayer.setHistBasePoint(t)},GPlot.prototype.setHistType=function(t){this.mainLayer.setHistType(t)},GPlot.prototype.setHistVisible=function(t){this.mainLayer.setHistVisible(t)},GPlot.prototype.setDrawHistLabels=function(t){this.mainLayer.setDrawHistLabels(t)},GPlot.prototype.setLabelBgColor=function(t){this.mainLayer.setLabelBgColor(t)},GPlot.prototype.setLabelSeparation=function(t){this.mainLayer.setLabelSeparation(t)},GPlot.prototype.setTitleText=function(t){this.title.setText(t)},GPlot.prototype.setAxesOffset=function(t){this.xAxis.setOffset(t),this.topAxis.setOffset(t),this.yAxis.setOffset(t),this.rightAxis.setOffset(t)},GPlot.prototype.setTicksLength=function(t){this.xAxis.setTickLength(t),this.topAxis.setTickLength(t),this.yAxis.setTickLength(t),this.rightAxis.setTickLength(t)},GPlot.prototype.setHorizontalAxesNTicks=function(t){this.xAxis.setNTicks(t),this.topAxis.setNTicks(t)},GPlot.prototype.setHorizontalAxesTicksSeparation=function(t){this.xAxis.setTicksSeparation(t),this.topAxis.setTicksSeparation(t)},GPlot.prototype.setHorizontalAxesTicks=function(t){this.xAxis.setTicks(t),this.topAxis.setTicks(t)},GPlot.prototype.setVerticalAxesNTicks=function(t){this.yAxis.setNTicks(t),this.rightAxis.setNTicks(t)},GPlot.prototype.setVerticalAxesTicksSeparation=function(t){this.yAxis.setTicksSeparation(t),this.rightAxis.setTicksSeparation(t)},GPlot.prototype.setVerticalAxesTicks=function(t){this.yAxis.setTicks(t),this.rightAxis.setTicks(t)},GPlot.prototype.setFontName=function(t){this.mainLayer.setFontName(t)},GPlot.prototype.setFontColor=function(t){this.mainLayer.setFontColor(t)},GPlot.prototype.setFontSize=function(t){this.mainLayer.setFontSize(t)},GPlot.prototype.setFontProperties=function(t,i,s){this.mainLayer.setFontProperties(t,i,s)},GPlot.prototype.setAllFontProperties=function(t,i,s){this.xAxis.setAllFontProperties(t,i,s),this.topAxis.setAllFontProperties(t,i,s),this.yAxis.setAllFontProperties(t,i,s),this.rightAxis.setAllFontProperties(t,i,s),this.title.setFontProperties(t,i,s),this.mainLayer.setAllFontProperties(t,i,s);for(var e=0;e<this.layerList.length;e++)this.layerList[e].setAllFontProperties(t,i,s)},GPlot.prototype.getPos=function(){return this.pos.slice()},GPlot.prototype.getOuterDim=function(){return this.outerDim.slice()},GPlot.prototype.getMar=function(){return this.mar.slice()},GPlot.prototype.getDim=function(){return this.dim.slice()},GPlot.prototype.getXLim=function(){return this.xLim.slice()},GPlot.prototype.getYLim=function(){return this.yLim.slice()},GPlot.prototype.getFixedXLim=function(){return this.fixedXLim},GPlot.prototype.getFixedYLim=function(){return this.fixedYLim},GPlot.prototype.getXLog=function(){return this.xLog},GPlot.prototype.getYLog=function(){return this.yLog},GPlot.prototype.getInvertedXScale=function(){return this.invertedXScale},GPlot.prototype.getInvertedYScale=function(){return this.invertedYScale},GPlot.prototype.getMainLayer=function(){return this.mainLayer},GPlot.prototype.getLayer=function(t){var i;if(this.mainLayer.isId(t))i=this.mainLayer;else for(var s=0;s<this.layerList.length;s++)if(this.layerList[s].isId(t)){i=this.layerList[s];break}return void 0===i&&console.log("Couldn't find a layer in the plot with id = "+t),i},GPlot.prototype.getXAxis=function(){return this.xAxis},GPlot.prototype.getYAxis=function(){return this.yAxis},GPlot.prototype.getTopAxis=function(){return this.topAxis},GPlot.prototype.getRightAxis=function(){return this.rightAxis},GPlot.prototype.getTitle=function(){return this.title},GPlot.prototype.getPoints=function(){if(1===arguments.length)return this.getLayer(arguments[0]).getPoints();if(0===arguments.length)return this.mainLayer.getPoints();throw new Error("GPlot.getPoints(): signature not supported")},GPlot.prototype.getPointsRef=function(){if(1===arguments.length)return this.getLayer(arguments[0]).getPointsRef();if(0===arguments.length)return this.mainLayer.getPointsRef();throw new Error("GPlot.getPointsRef(): signature not supported")},GPlot.prototype.getHistogram=function(){if(1===arguments.length)return this.getLayer(arguments[0]).getHistogram();if(0===arguments.length)return this.mainLayer.getHistogram();throw new Error("GPlot.getHistogram(): signature not supported")},GPlot.prototype.activateZooming=function(){var t,i,s,e,o;if(5===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=arguments[3],o=arguments[4];else if(3===arguments.length)t=arguments[0],i=arguments[1],s=arguments[2],e=GPlot.NONE,o=GPlot.NONE;else if(1===arguments.length)t=arguments[0],i=this.parent.LEFT,s=this.parent.RIGHT,e=GPlot.NONE,o=GPlot.NONE;else{if(0!==arguments.length)throw new Error("GPlot.activateZooming(): signature not supported");t=1.3,i=this.parent.LEFT,s=this.parent.RIGHT,e=GPlot.NONE,o=GPlot.NONE}this.zoomingIsActive=!0,t>0&&(this.zoomFactor=t),i!==this.parent.LEFT&&i!==this.parent.RIGHT&&i!==this.parent.CENTER||(this.increaseZoomButton=i),s!==this.parent.LEFT&&s!==this.parent.RIGHT&&s!==this.parent.CENTER||(this.decreaseZoomButton=s),e!==this.parent.SHIFT&&e!==this.parent.CONTROL&&e!==this.parent.ALT&&e!==GPlot.NONE||(this.increaseZoomKeyModifier=e),o!==this.parent.SHIFT&&o!==this.parent.CONTROL&&o!==this.parent.ALT&&o!==GPlot.NONE||(this.decreaseZoomKeyModifier=o)},GPlot.prototype.deactivateZooming=function(){this.zoomingIsActive=!1},GPlot.prototype.activateCentering=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else if(1===arguments.length)t=arguments[0],i=GPlot.NONE;else{if(0!==arguments.length)throw new Error("GPlot.activateCentering(): signature not supported");t=this.parent.LEFT,i=GPlot.NONE}this.centeringIsActive=!0,t!==this.parent.LEFT&&t!==this.parent.RIGHT&&t!==this.parent.CENTER||(this.centeringButton=t),i!==this.parent.SHIFT&&i!==this.parent.CONTROL&&i!==this.parent.ALT&&i!==GPlot.NONE||(this.centeringKeyModifier=i)},GPlot.prototype.deactivateCentering=function(){this.centeringIsActive=!1},GPlot.prototype.activatePanning=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else if(1===arguments.length)t=arguments[0],i=GPlot.NONE;else{if(0!==arguments.length)throw new Error("GPlot.activatePanning(): signature not supported");t=this.parent.LEFT,i=GPlot.NONE}this.panningIsActive=!0,t!==this.parent.LEFT&&t!==this.parent.RIGHT&&t!==this.parent.CENTER||(this.panningButton=t),i!==this.parent.SHIFT&&i!==this.parent.CONTROL&&i!==this.parent.ALT&&i!==GPlot.NONE||(this.panningKeyModifier=i)},GPlot.prototype.deactivatePanning=function(){this.panningIsActive=!1,this.panningReferencePoint=void 0},GPlot.prototype.activatePointLabels=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else if(1===arguments.length)t=arguments[0],i=GPlot.NONE;else{if(0!==arguments.length)throw new Error("GPlot.activatePointLabels(): signature not supported");t=this.parent.LEFT,i=GPlot.NONE}this.labelingIsActive=!0,t!==this.parent.LEFT&&t!==this.parent.RIGHT&&t!==this.parent.CENTER||(this.labelingButton=t),i!==this.parent.SHIFT&&i!==this.parent.CONTROL&&i!==this.parent.ALT&&i!==GPlot.NONE||(this.labelingKeyModifier=i)},GPlot.prototype.deactivatePointLabels=function(){this.labelingIsActive=!1,this.mousePos=void 0},GPlot.prototype.activateReset=function(){var t,i;if(2===arguments.length)t=arguments[0],i=arguments[1];else if(1===arguments.length)t=arguments[0],i=GPlot.NONE;else{if(0!==arguments.length)throw new Error("GPlot.activateReset(): signature not supported");t=this.parent.RIGHT,i=GPlot.NONE}this.resetIsActive=!0,this.xLimReset=void 0,this.yLimReset=void 0,t!==this.parent.LEFT&&t!==this.parent.RIGHT&&t!==this.parent.CENTER||(this.resetButton=t),i!==this.parent.SHIFT&&i!==this.parent.CONTROL&&i!==this.parent.ALT&&i!==GPlot.NONE||(this.resetKeyModifier=i)},GPlot.prototype.deactivateReset=function(){this.resetIsActive=!1,this.xLimReset=void 0,this.yLimReset=void 0},GPlot.prototype.getButton=function(t){var i
;return 0===t.button?i=this.parent.LEFT:1===t.button?i=this.parent.CENTER:2===t.button?i=this.parent.RIGHT:void 0===t.button&&(i=this.parent.LEFT),i},GPlot.prototype.getModifier=function(t){var i;return i=t.altKey?this.parent.ALT:t.ctrlKey?this.parent.CONTROL:t.shiftKey?this.parent.SHIFT:GPlot.NONE,i},GPlot.prototype.saveResetLimits=function(){void 0!==this.xLimReset&&void 0!==this.yLimReset||(this.xLimReset=this.xLim.slice(),this.yLimReset=this.yLim.slice())},GPlot.prototype.clickEvent=function(t){var i=t||window.event;if(this.isOverBox()){var s=this.getButton(i),e=this.getModifier(i);this.zoomingIsActive&&(s===this.increaseZoomButton&&e===this.increaseZoomKeyModifier?(this.resetIsActive&&this.saveResetLimits(),this.zoom(this.zoomFactor,this.parent.mouseX,this.parent.mouseY)):s===this.decreaseZoomButton&&e===this.decreaseZoomKeyModifier&&(this.resetIsActive&&this.saveResetLimits(),this.zoom(1/this.zoomFactor,this.parent.mouseX,this.parent.mouseY))),this.centeringIsActive&&s===this.centeringButton&&e===this.centeringKeyModifier&&(this.resetIsActive&&this.saveResetLimits(),this.center(this.parent.mouseX,this.parent.mouseY)),this.resetIsActive&&s===this.resetButton&&e===this.resetKeyModifier&&void 0!==this.xLimReset&&void 0!==this.yLimReset&&(this.setXLim(this.xLimReset),this.setYLim(this.yLimReset),this.xLimReset=void 0,this.yLimReset=void 0)}},GPlot.prototype.wheelEvent=function(t){var i=t||window.event;if(this.isOverBox()){var s=i.deltaY,e=this.parent.CENTER,o=this.getModifier(i);this.zoomingIsActive&&(e===this.increaseZoomButton&&o===this.increaseZoomKeyModifier&&s>0?(i.preventDefault(),this.resetIsActive&&this.saveResetLimits(),this.zoom(this.zoomFactor,this.parent.mouseX,this.parent.mouseY)):e===this.decreaseZoomButton&&o===this.decreaseZoomKeyModifier&&s<0&&(i.preventDefault(),this.resetIsActive&&this.saveResetLimits(),this.zoom(1/this.zoomFactor,this.parent.mouseX,this.parent.mouseY)))}},GPlot.prototype.mouseDownEvent=function(t){var i=t||window.event;if(this.isOverBox()){var s=!1,e=this.getButton(i),o=this.getModifier(i);this.panningIsActive&&e===this.panningButton&&o===this.panningKeyModifier&&(s=!0,this.resetIsActive&&this.saveResetLimits(),this.panningReferencePoint=this.getValueAt(this.parent.mouseX,this.parent.mouseY)),this.labelingIsActive&&e===this.labelingButton&&o===this.labelingKeyModifier&&(s=!0,this.mousePos=[this.parent.mouseX,this.parent.mouseY]),s&&(document.addEventListener("mousemove",this.mouseMoveListener,!1),document.addEventListener("mouseup",this.mouseUpListener,!1))}},GPlot.prototype.mouseMoveEvent=function(t){var i=t||window.event,s=this.getButton(i),e=this.getModifier(i);t.preventDefault(),this.panningIsActive&&s===this.panningButton&&e===this.panningKeyModifier&&this.align(this.panningReferencePoint,this.parent.mouseX,this.parent.mouseY),this.labelingIsActive&&s===this.labelingButton&&e===this.labelingKeyModifier&&(this.mousePos=[this.parent.mouseX,this.parent.mouseY])},GPlot.prototype.mouseUpEvent=function(t){var i=t||window.event,s=this.getButton(i);document.removeEventListener("mousemove",this.mouseMoveListener,!1),document.removeEventListener("mouseup",this.mouseUpListener,!1),this.panningIsActive&&s===this.panningButton&&(this.panningReferencePoint=void 0),this.labelingIsActive&&s===this.labelingButton&&(this.mousePos=void 0)},GPlot.prototype.touchStartEvent=function(t){var i=t||window.event;if(this.parent._ontouchstart(i),this.isOverBox()){var s=!1;if(this.panningIsActive&&(s=!0,this.panningReferencePoint=this.getValueAt(this.parent.mouseX,this.parent.mouseY)),this.labelingIsActive&&(s=!0,this.mousePos=[this.parent.mouseX,this.parent.mouseY]),this.zoomingIsActive&&void 0!==i.touches&&2===i.touches.length){s=!0;var e=i.touches[0].pageX-i.touches[1].pageX,o=i.touches[0].pageY-i.touches[1].pageY;this.zoomStartDistance=Math.sqrt(e*e+o*o),this.zoomStartPosition=[this.parent.mouseX,this.parent.mouseY]}s&&(document.addEventListener("touchmove",this.touchMoveListener,{passive:!1}),document.addEventListener("touchend",this.touchEndListener,!1),document.addEventListener("touchcancel",this.touchEndListener,!1))}},GPlot.prototype.touchMoveEvent=function(t){var i=t||window.event;if(i.preventDefault(),this.panningIsActive&&this.align(this.panningReferencePoint,this.parent.mouseX,this.parent.mouseY),this.labelingIsActive&&(this.mousePos=[this.parent.mouseX,this.parent.mouseY]),this.zoomingIsActive&&void 0!==i.touches&&2===i.touches.length){var s=i.touches[0].pageX-i.touches[1].pageX,e=i.touches[0].pageY-i.touches[1].pageY,o=Math.sqrt(s*s+e*e);this.zoom(o/this.zoomStartDistance,this.zoomStartPosition[0],this.zoomStartPosition[1]),this.zoomStartDistance=o}},GPlot.prototype.touchEndEvent=function(t){document.removeEventListener("touchmove",this.touchMoveListener,!1),document.removeEventListener("touchend",this.touchEndListener,!1),document.removeEventListener("touchcancel",this.touchEndListener,!1),this.panningIsActive&&(this.panningReferencePoint=void 0),this.labelingIsActive&&(this.mousePos=void 0),this.zoomingIsActive&&(this.zoomStartDistance=void 0,this.zoomStartPosition=void 0)},GPlot.prototype.preventDefaultEvent=function(t){var i=t||window.event;this.isOverBox()&&i.preventDefault()},GPlot.prototype.contextMenuEvent=function(t){var i=t||window.event;this.isOverBox()&&(i.preventDefault(),this.clickEvent(i))},GPlot.prototype.preventWheelDefault=function(){this.parentElt.addEventListener("wheel",this.preventDefaultEvent.bind(this),!1)},GPlot.prototype.preventRightClickDefault=function(){this.parentElt.addEventListener("contextmenu",this.contextMenuEvent.bind(this),!1)};