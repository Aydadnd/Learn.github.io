const dragCoeffs = {

  "golf ball" : [
    [ 2e4, 0.47 ],
    [ 3e4, 0.48 ],
    [ 4e4, 0.47 ],
    [ 5e4, 0.34 ],
    [ 5.5e4, 0.26 ],
    [ 6e4, 0.25 ],
    [ 7e4, 0.24 ],
    [ 8e4, 0.23 ],
    [ 9e4, 0.23 ],
    [ 1e5, 0.24 ],
    [ 3e5, 0.26 ]
  ],
  
  "1.25e-2" : [
    [ 2e4, 0.47 ],
    [ 3e4, 0.48 ],
    [ 4e4, 0.49 ],
    [ 5e4, 0.49 ],
    [ 6e4, 0.47 ],
    [ 7e4, 0.39 ],
    [ 8e4, 0.22 ],
    [ 9e4, 0.21 ],
    [ 1e5, 0.26 ],
    [ 1.5e5, 0.33 ],
    [ 2e5, 0.36 ],
    [ 3e5, 0.37 ],
    [ 4e5, 0.39 ],
    [ 5e5, 0.395 ],
    [ 6e5, 0.398 ],
    [ 8e5, 0.4 ],
    [ 1e6, 0.405 ],
    [ 4e6, 0.405 ],
  ],
  
  "5e-3" : [
    [ 2e4, 0.47 ],
    [ 8e4, 0.505 ],
    [ 9e4, 0.5 ],
    [ 1e5, 0.48 ],
    [ 1.1e5, 0.44 ],
    [ 1.15e5, 0.13 ],
    [ 1.4e5, 0.2 ],
    [ 1.6e5, 0.25 ],
    [ 2e5, 0.28 ],
    [ 3e5, 0.32 ],
    [ 4e5, 0.35 ],
    [ 6e5, 0.37 ],
    [ 8e5, 0.38 ],
    [ 1e6, 0.385 ],
    [ 4e6, 0.39 ],
  ],

  "1.5e-3" : [
    [ 2e4, 0.47 ],
    [ 1e5, 0.51 ],
    [ 1.2e5, 0.48 ],
    [ 1.4e5, 0.44 ],
    [ 1.6e5, 0.2 ],
    [ 1.7e5, 0.1 ],
    [ 2e5, 0.07 ],
    [ 2.05e5, 0.09 ],
    [ 3e5, 0.24 ],
    [ 4e5, 0.3 ],
    [ 6e5, 0.33 ],
    [ 8e5, 0.35 ],
    [ 1e6, 0.37 ],
    [ 2e6, 0.38 ],
    [ 4e6, 0.375 ]
  ],

  "smooth" : [
    [ 2e4, 0.47 ],
    [ 1.3e5, 0.515 ],
    [ 2e5, 0.505 ],
    [ 2.8e5, 0.49 ],
    [ 3e5, 0.47 ],
    [ 3.5e5, 0.4 ],
    [ 3.9e5, 0.12 ],
    [ 4e5, 0.09 ],
    [ 4.3e5, 0.06 ],
    [ 6e5, 0.07 ],
    [ 8e5, 0.09 ],
    [ 1e6, 0.1 ],
    [ 2e6, 0.15 ],
    [ 4e6, 0.19 ]
  ]
}

function dragCoeff(roughness, Re) {
  
  const dArray = dragCoeffs[roughness];
  
  if( Re < dArray[0][0] ) {
    return dArray[0][1]
  }

  for ( let i = 0; i < dArray.length - 1; i++ ) {
    // Linear interpolation
    if( Re >= dArray[i][0] && Re < dArray[i + 1][0]) {
      const frac = ( Re - dArray[i][0] ) / ( dArray[i + 1][0] - dArray[i][0] );
      const diff = ( dArray[i + 1][1] - dArray[i][1] );
      return dArray[i][1] + frac * diff;
    }
  }

  return dArray[dArray.length - 1][1];
};

module.exports = { dragCoeffs, dragCoeff }