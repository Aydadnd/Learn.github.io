<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="en">
  <title>RTD of CSTRs in Series</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script>
    MathJax = {
      chtml: {
        scale: 0.9,
        mathmlSpacing: true,
        displayAlign: 'left',
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-204988035-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-204988035-3');
  </script>
</head>

<body>

  <div class="simulation-controls">
    <div class="input-area">
  
      <div class="input-row">
        <div class="data-name">number of CSTRs in series</div>
        <input type="range" id="number-of-cstrs-slider" min="1" max="25" step="1" value="1">
        <div class="data-value" id="number-of-cstrs-value">1</div>
      </div>

      <div class="input-row">
        <div class="data-name">spacetime</div>
        <input type="range" id="spacetime-slider" min="1200" max="12000" step="60" value="6000">
        <div class="data-value" id="spacetime-value">100</div>
        <div class="data-metric">min</div>
      </div>
  
    </div>

    <div class="modal-buttons-row">
      <div id="directions-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#directions-modal">Directions</div>
      <div id="details-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#details-modal">Details</div>
      <div id="about-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#about-modal">About</div>
    </div>

  </div>

  <div id="p5-container"></div>

  <div class="modal fade" id="directions-modal" tabindex="-1" role="dialog" aria-labelledby="directions-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="directions-modal-label">Directions</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            This simulation displays the residence time distribution (RTD), which is measured by injecting a tracer pulse into the first continuously-stirred tank reactor (CSTR) in a series and detecting the tracer concentration at the outlet of the last CSTR. The outlet of each CSTR is the inlet to the next CSTR. The RTD for the system of CSTRs is a probability that a molecule will spend a certain amount of time in the reactor system. Use the sliders to change the number of CSTRs in series and the space time of the system (i.e., the space time \( \tau \) is the total volume of CSTRs divided by the volumetric flow rate).
          </p>

        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="details-modal" tabindex="-1" role="dialog" aria-labelledby="details-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title" id="details-modal-label">Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>

        <div class="modal-body">
          <div class="details-text">
            A pulse of tracer is injected into the first CSTR in a series such that at time \( t = 0 \), all the tracer is in the CSTR and the material balance on the first CSTR is
          </div>

          <div class="details-eqn">
            $$
            [1] \quad V \frac{dC_{1}}{dt} = - \upsilon \, C_{1}
            $$
          </div>

          <div class="details-text">
            with initial condition \( C_{1} = C_{0} \) at \( t = 0 \). In equation [1], \( V \) is the volume of the CSTR (L), \( C_{1} \) is the concentration of tracer in the CSTR (and in the outlet from the CSTR) at time \( t \) (s), and \( \upsilon \) is volumetric flowrate (L/s). Rearranging this equation yields
          </div>

          <div class="details-eqn">
            $$
            [2] \quad \int_{C_{0}}^{C_{1}} \frac{d C_{1}}{C_{1}} = - \int_{0}^{t} \frac{\upsilon \, dt}{V}
            $$
          </div>
          
          <div class="details-text">
            Space time for a series of \( N \) CSTRs is defined as \( \tau = V_{total} / \upsilon \) where the total volume \( V_{total} = NV \). Thus, integrating equation 2 yeilds
          </div>

          <div class="details-eqn">
            $$
            [3] \quad \mathrm{ln} \left( \frac{C_{1}}{C_{0}} \right) = - \frac{N t}{\tau}
            $$
          </div>

          <div class="details-text">or</div>

          <div class="details-eqn">
            $$
            [4] \quad C_{1} = C_{0} e^{- N t / \tau}
            $$
          </div>

          <div class="details-text">
            The material balance for the second CSTR is
          </div>

          <div class="details-eqn">
            $$
            [5] \quad \frac{V d C_{2}}{dt} = \upsilon C_{1} - \upsilon C_{2}
            $$
          </div>

          <div class="details-text">
            with initial condition \( C_{2} = 0 \) at \( t = 0 \). In equation [5], \( C_{2} \) is the concentration of tracer in the second CSTR (and thus leaving the second CSTR). Solving this equation yields
          </div>

          <div class="details-eqn">
            $$
            [6] \quad C_{2} = \frac{C_{0} N t e^{-Nt / \tau}}{\tau}
            $$
          </div>

          <div class="details-text">
            Solving material balances for additional CSTRs leads to the general equation for the n<sup>th</sup> CSTR
          </div>

          <div class="details-eqn">
            $$
            [7] \quad C_{n} = (C_{0} t^{n - 1})\left( \frac{N}{\tau} \right)^{n - 1} \frac{e^{-N t / \tau}}{(n - 1)!}
            $$
          </div>

          <div class="details-text">
            The residence time distribution (RTD) for \( N \) CSTRs \( E_{N} (t) \) is a probability function so that
          </div>

          <div class="details-eqn">
            $$
            [8] \quad \int_{0}^{\infty} E_{N} (t) dt = 1
            $$
          </div>

          <div class="details-text">
            thus,
          </div>

          <div class="details-eqn">
            $$
            [8] \quad E(t) = \frac{C_{N}}{\int_{0}^{\infty} C_{N} dt}
            $$
          </div>

          <div class="details-text">
            and since \( \int_{0}^{\infty} C_{N} dt = \int_{0}^{\infty} C_{1} = \frac{C_{0} \tau}{N} \), then for a series of \( N \) CSTRs,
          </div>

          <div class="details-eqn">
            $$
            [9] \quad E_{N} (t) = \frac{t^{N - 1}}{(N - 1)!} \left( \frac{N}{\tau} \right)^{N} e^{- N t / \tau}
            $$
          </div>

          <div style="margin-top: 2rem;"></div>
        </div>

      </div>
    </div>
  </div>

  <div class="modal fade" id="about-modal" tabindex="-1" role="dialog" aria-labelledby="about-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="about-modal-label">About</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            This simulation was created in the <a href="https://www.colorado.edu/chbe" target="_blank">Department of Chemical and Biological Engineering</a>, at University of Colorado Boulder for <a href="http://www.learncheme.com" target="_blank">LearnChemE.com</a> by Neil Hendren under the direction of Professor John L. Falconer. This simulation was prepared with financial support from the National Science Foundation. Address any questions or comments to learncheme@gmail.com.<br><br>Is your screen too small to fit this application? Try zooming-out on the web page (CTRL+"-" and CTRL+"=" on Windows, or ⌘+"-" and ⌘+"=" on Mac), then refreshing the page. This application is not compatible with Internet Explorer or web browsers that do not support WebGL and HTML5. Recommended browsers are the latest versions of: Chrome, Safari, Firefox, Edge, and Opera.
          </p>
        </div>
      </div>
    </div>
  </div>
</body>

</html>