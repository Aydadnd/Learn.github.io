function setup(){let t=document.getElementById("main"),e=document.createElement("button");e.id="resetbutton",e.innerText="reset",e.onclick=reset,e.style.zIndex=3,e.style.position="absolute",e.style.top="10px",t.appendChild(e),dims=windowResized(!0),t.style.width=`${dims}px`,t.style.height=`${dims}px`,e.style.left=`${instrX}px`,e.classList.add("buttonMed"),e.classList.add("red");let i=document.getElementById("aboutButton");e.style.fontSize=`${Number(window.getComputedStyle(i).getPropertyValue("font-size").replace(/[^\d.-]/g,""))}px`,i.style.position="absolute",i.style.left=`${getCoords(e).right+20}px`,i.style.top=`${getCoords(e).top}px`;let s=createCanvas(dims,dims);s.parent("main"),s.position(0,0),s.style("z-index",1),frameRate(fps),w=dims/100,h=dims/100,textAlign(LEFT,TOP),vid=document.getElementById("cylVid"),vid.currentTime=0,vidContainer=document.getElementById("vidContainer"),vidContainer.style.position="absolute",windowResized(),background(255,255,255)}function draw(){update&&drawPage(page),effects&&applyEffect(effect),update=!1}function drawPage(p){switch(clear(),p){case 1:removeElements(),choices=[],domObjs=[],effect=[],text("Click a fundamental equation to get started.",instrX,instrY),k=Object.keys(eqns.fundamentals);for(let i=0;i<k.length;i++){domObjs.push(new Tex({content:eqns.fundamentals[k[i]],position:[texX,eval(`${texY+lnHt*(i+1)}+${4==i?4*lnHt:0}`)],name:`${k[i]}`})),domObjs[i].div.addClass("eq"),domObjs[i].div.id(`eq${i}`),domObjs[i].div.style("z-index","2");let id=`${i}`;document.getElementById(`eq${id}`).addEventListener("mousedown",()=>{1==page&&choices.push(parseInt(id)),next(1,choices[0])})}const instr2Y=getCoords(document.getElementById(`eq${Object.keys(eqns.fundamentals).length-1}`)).top-3.5*lnHt;text("Or to better understand exact differentials, click\nthis equation of cylinder volume dependence on\nradius and length",instrX,instr2Y),vidContainer.style.right="0px",vidContainer.style.top=`${instr2Y+4*lnHt}px`,vidContainer.style.width=`${2*dims/5}px`,vidContainer.style.height=`${2*dims/5}px`;break;case 2:cylinder?(text("Click the dimension you would like held constant\n(options are colored)",instrX,instrY),vidContainer.style.transition=`all ${2/animSpeedMult}s`):text("Click the state variable you would like held constant\n(options are colored)",instrX,instrY);for(let t=0;t<domObjs.length;t++)t!=choices[0]&&domObjs[t].div.remove();effect=[],eqnLetterObjs=document.querySelectorAll("mjx-container")[0].firstChild.childNodes,coloredLetters=0==choices[0]||2==choices[0]?[5,9]:1==choices[0]||3==choices[0]?[6,10]:[5,9];for(let t=0;t<coloredLetters.length;t++){let e=eqnLetterObjs[coloredLetters[t]],i=`${t}`;effect.push({target:e,effect:"color",color:`${i}`}),e.addEventListener("mousedown",()=>{next(2,i)})}effects=!0;break;case 3:domObjs.push(new Tex({content:`\\left( \\frac{\\partial ${partials[0]}}{\\partial ${partials[1]}} \\right)_{\\scriptscriptstyle ${constant}}=${rhs}`,position:[texX,texY],name:"partial"})),domObjs[domObjs.length-1].div.id("stateFunc1"),stateFunc1=document.getElementById("stateFunc1"),stateFunc1.style.fontSize=`${largeFontSize}rem`,topPartial1=stateFunc1.firstChild.firstChild.firstChild.childNodes[0].childNodes[1].firstChild.childNodes[0],bottomPartial1=stateFunc1.firstChild.firstChild.firstChild.childNodes[0].childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].childNodes[1],constantText1=stateFunc1.firstChild.firstChild.firstChild.childNodes[1],refLeft=getCoords(constantText1).right,domObjs[domObjs.length-1].div.hide(),effect.push({target:[eqnLetterObjs[constantIndex-1],eqnLetterObjs[constantIndex]],effect:"zeroAndDelete"}),effects=!0,loop();break;case 4:vDuration=vid.duration,cylinder?(txt=`With constant ${"0"==choices[1]?"radius ":"length "} `,txt2="and we know that the volume of a cylinder is ",txt3=`therefore, volume changes with\n${"1"==choices[1]?"radius":"length"} according to the following: `,volumeText=new Tex({content:"V=πr²L",position:[texX,texY+4*lnHt],name:"volumeEqn"}),volumeText.div.id("volumeText"),volumeTextDOMObj=document.getElementById("volumeText"),volumeTextDOMObj.style.fontSize=`${largeFontSize}rem`,volumeTextDOMObj.style.opacity="0"):(txt="With constant ",txt2="therefore,");let newTex=domObjs[domObjs.length-1];newTex.div.show(),newTex.div.style("opacity","0"),effect.push({target:topPartial1,effect:"color",color:"2"}),effect.push({target:bottomPartial1,effect:"color",color:`${0==choices[1]?1:0}`}),effect.push({target:constantText1,effect:"color",color:`${1==choices[1]?1:0}`}),effects=!0,next(4,null);break;case 5:text(txt,instrX,instrY),sWidth=textWidth(txt),cnst=new Tex({content:`${constant},`,position:[instrX+sWidth+.05*lnHt,instrY-.1*lnHt]}),cnst.div.id("constantLetter"),effect.push({target:document.getElementById("constantLetter"),effect:"color",color:`${1==choices[1]?1:0}`}),effects=!0,page++,window.setTimeout(t=>{update=!0},textDelay);break;case 6:text(txt,instrX,instrY),text(txt2,instrX,texY+3*lnHt),cylinder?(window.setTimeout(t=>{volumeTextDOMObj.style.opacity="1"},textDelay),window.setTimeout(t=>{update=!0},2*textDelay)):window.setTimeout(t=>{update=!0},textDelay),page++;break;case 7:text(txt,instrX,instrY),text(txt2,instrX,texY+3*lnHt),cylinder?(text(txt3,instrX,getCoords(volumeTextDOMObj).bottom+lnHt),start="0"==choices[1]?0:vDuration/4,window.setTimeout(t=>{stateFunc1.style.top=`${getCoords(volumeTextDOMObj).bottom+3*lnHt}px`,stateFunc1.style.opacity="1",vid.currentTime=start,vid.play()},textDelay),vid.addEventListener("timeupdate",function(){this.currentTime>=start+vDuration/4-.25&&this.pause()}),window.setTimeout(t=>{update=!0},2*textDelay)):(stateFunc1.style.top=`${texY+5*lnHt}px`,stateFunc1.style.opacity="1",window.setTimeout(t=>{update=!0},textDelay)),page++;break;case 8:text(txt,instrX,instrY),text(txt2,instrX,texY+3*lnHt),cylinder&&text(txt3,instrX,getCoords(volumeTextDOMObj).bottom+lnHt),text("click anywhere to continue.",instrX,getCoords(stateFunc1).bottom+lnHt),document.getElementsByClassName("p5Canvas")[0].addEventListener("mousedown",()=>{next(8,null)});break;case 9:if(s=2/animSpeedMult,selectItem(str,eqnLetterObjs,choices[1]).forEach(function(t){t.style.visibility="visible",t.style.transition=`opacity ${s}s`,t.style.opacity="1"}),0==choices[1]){let t=selectItem(str,eqnLetterObjs,1);negativeQ||setTimeout(()=>{t[0].style.visibility="visible",t[0].style.opacity="1"},1e3*s),t.forEach(function(t){t.style.transition=`all ${s}s`,t.style.transform="translateX(0px)"})}stateFunc1.style.transition=`all ${s}s`,stateFunc1.style.top=`${90*h-2*lnHt}px`,document.getElementById(`eq${choices[0]}`).style.top=`${texY+1.2*lnHt}px`,document.getElementById("constantLetter").remove(),page++,window.setTimeout(t=>{update=!0},textDelay);break;case 10:choices[1]=0==choices[1]?1:0,effect=[],stateFunc1.style.opacity=.3;let txtTop=cylinder?`Now, let's examine volume change with respect to ${"1"==choices[1]?"radius.":"length."}`:"Now, the other state function must be derived. ",txtBottom="Click ";sWidth=textWidth(txtTop);let sWidth2=textWidth(txtBottom),click=selectItem(str,eqnLetterObjs,choices[1],!0);for(constant=click[click.length-1],cnst3=new Tex({content:`${constant}`,position:[instrX+sWidth2+.05*lnHt,instrY+lnHt-.1*lnHt]}),cnst3.div.id("constantLetter3"),effect.push({target:document.getElementById("constantLetter3"),effect:"color",color:`${1==choices[1]?1:0}`}),text(`${txtTop}\n${txtBottom}`,instrX,instrY),text(`\n to hold ${cylinder?0==choices[1]?"radius":"length":"it"} constant.`,getCoords(document.getElementById("constantLetter3")).right+.05*lnHt,instrY),i=0;i<domObjs.length;i++)domObjs[i].div.style("z-index","2");let newElement=0==choices[1]?0:1,newListener=eqnLetterObjs[coloredLetters[newElement]];newListener.addEventListener("mousedown",()=>{next(10,choices[1])});break;case 11:cnst3.div.remove(),domObjs.push(new Tex({content:`\\left( \\frac{\\partial ${partials[0]}}{\\partial ${partials[1]}} \\right)_{\\scriptscriptstyle ${constant}}=${rhs}`,position:[texX,texY],name:"partial2"})),domObjs[domObjs.length-1].div.id("stateFunc2"),stateFunc2=document.getElementById("stateFunc2"),stateFunc2.style.fontSize=`${largeFontSize}rem`,topPartial2=stateFunc2.firstChild.firstChild.firstChild.childNodes[0].childNodes[1].firstChild.childNodes[0],bottomPartial2=stateFunc2.firstChild.firstChild.firstChild.childNodes[0].childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].childNodes[1],constantText2=stateFunc2.firstChild.firstChild.firstChild.childNodes[1],refLeft=getCoords(constantText2).right,domObjs[domObjs.length-1].div.hide(),effect.push({target:[eqnLetterObjs[constantIndex-1],eqnLetterObjs[constantIndex]],effect:"zeroAndDelete"}),effects=!0,loop();break;case 12:cylinder?(txt=`With constant ${"0"==choices[1]?"radius ":"length "} `,txt2="and we know that the volume of a cylinder is ",txt3=`therefore, volume changes with\n${"1"==choices[1]?"radius":"length"} according to the following: `):(txt="With constant ",txt2="therefore,"),text(txt,instrX,instrY);let newTex2=domObjs[domObjs.length-1];newTex2.div.show(),newTex2.div.style("opacity","0"),effect.push({target:topPartial2,effect:"color",color:"2"}),effect.push({target:bottomPartial2,effect:"color",color:`${0==choices[1]?1:0}`}),effect.push({target:constantText2,effect:"color",color:`${1==choices[1]?1:0}`}),effects=!0,next(12,null);break;case 13:text(txt,instrX,instrY),sWidth=textWidth(txt),cnst4=new Tex({content:`${constant},`,position:[instrX+sWidth+.05*lnHt,instrY-.1*lnHt]}),cnst4.div.id("constantLetter4"),effect.push({target:document.getElementById("constantLetter4"),effect:"color",color:`${1==choices[1]?1:0}`}),effects=!0,page++,window.setTimeout(t=>{update=!0},textDelay);break;case 14:text(txt,instrX,instrY),text(txt2,instrX,texY+3*lnHt),cylinder?(window.setTimeout(t=>{volumeTextDOMObj.style.display="block"},textDelay),window.setTimeout(t=>{update=!0},2*textDelay)):window.setTimeout(t=>{update=!0},textDelay),page++;break;case 15:text(txt,instrX,instrY),text(txt2,instrX,texY+3*lnHt),cylinder?(text(txt3,instrX,getCoords(volumeTextDOMObj).bottom+lnHt),vid.removeEventListener("timeupdate",function(){this.currentTime>=start+vDuration/4-.25&&this.pause()}),start="0"==choices[1]?0:vDuration/4,window.setTimeout(t=>{stateFunc2.style.top=`${getCoords(volumeTextDOMObj).bottom+3*lnHt}px`,stateFunc2.style.opacity="1",vid.currentTime=start,vid.play()},textDelay),vid.addEventListener("timeupdate",function(){this.currentTime>=start+vDuration/4-.25&&this.pause()}),window.setTimeout(t=>{update=!0},2*textDelay)):(stateFunc2.style.top=`${texY+5*lnHt}px`,stateFunc2.style.opacity="1",window.setTimeout(t=>{update=!0},textDelay)),page++;break;case 16:text(txt,instrX,instrY),text(txt2,instrX,texY+3*lnHt),cylinder&&text(txt3,instrX,getCoords(volumeTextDOMObj).bottom+lnHt),text("click anywhere to continue.",instrX,getCoords(stateFunc2).bottom+lnHt),document.getElementsByClassName("p5Canvas")[0].addEventListener("mousedown",()=>{next(16,null)});break;case 17:stateFunc1.style.opacity="1",cylinder&&(volumeTextDOMObj.style.display="none"),eqnLetterObjs.forEach(t=>{t.style.visibility="inherit",t.style.opacity="0",t.style.transform="translateX(0px)"}),stateFunc2.style.transition=`all ${s}s`,stateFunc2.style.top=`${getCoords(stateFunc1).top-getCoords(stateFunc2).height-lnHt}px`,symmetryText=`\\Big( \\frac{\\partial}{\\partial ${constant}} \\Big( \\frac{\\partial ${partials[0]}}{\\partial ${partials[1]}} \\Big)_{\\scriptscriptstyle ${constant}} \\Big)_{\\scriptscriptstyle ${partials[1]} } = \\Big( \\frac{\\partial}{\\partial ${partials[1]}} \\Big( \\frac{\\partial ${partials[0]}}{\\partial ${constant}} \\Big)_{\\scriptscriptstyle ${partials[1]}} \\Big)_{\\scriptscriptstyle ${constant}} = \\frac{\\partial^{2} ${partials[0]}}{\\partial ${constant} \\partial ${partials[1]}}`,domObjs.push(new Tex({content:symmetryText,position:[texX,texY+1.5*lnHt],name:"symmetry"})),symmetry=domObjs[domObjs.length-1],symmetry.div.style("font-size",`${largeFontSize/1.5}rem`),symmetry.div.style("opacity","0"),symmetry.div.id("symmetry"),symmetry.div.style("visibility","hidden"),document.getElementById(`eq${choices[0]}`).style.visibility="hidden",document.getElementById("constantLetter4").remove(),page++,window.setTimeout(t=>{update=!0},textDelay);break;case 18:text("The order of differentiation does not matter for second\n derivatives. So:",instrX,instrY),symmetry.div.style("visibility","visible"),sym=document.getElementById("symmetry");let xItems=[sym.firstChild.firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].childNodes[1],sym.firstChild.firstChild.childNodes[4].childNodes[1],sym.firstChild.firstChild.childNodes[10].firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].childNodes[1],sym.firstChild.firstChild.childNodes[12].childNodes[1],sym.firstChild.firstChild.childNodes[14].firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].childNodes[1]],yItems=[sym.firstChild.firstChild.childNodes[3].firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].childNodes[1],sym.firstChild.firstChild.childNodes[5].childNodes[1],sym.firstChild.firstChild.childNodes[8].firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].childNodes[1],sym.firstChild.firstChild.childNodes[11].childNodes[1],sym.firstChild.firstChild.childNodes[14].firstChild.childNodes[1].firstChild.childNodes[1].firstChild.childNodes[1].childNodes[3]],zItems=[sym.firstChild.firstChild.childNodes[3].firstChild.childNodes[0],sym.firstChild.firstChild.childNodes[10].firstChild.childNodes[0],sym.firstChild.firstChild.childNodes[14].firstChild.childNodes[0]],xColor=0==choices[1]?"rgb(70, 200, 50)":"rgb(100, 100, 255)",yColor=1==choices[1]?"rgb(70, 200, 50)":"rgb(100, 100, 255)",zColor="rgb(0, 0, 0)";xItems.forEach(t=>{t.style.color=xColor}),yItems.forEach(t=>{t.style.color=yColor}),zItems.forEach(t=>{t.style.color=zColor}),symmetry.div.style("transition",`all ${1/animSpeedMult}s`),symmetry.div.style("opacity","1"),window.setTimeout(()=>{text(`click on one of the ${cylinder?"partial derivatives":"state functions"} below\nto substitute it into the equation above.`,instrX,getCoords(sym).bottom+2*lnHt),stateFunc1.style.zIndex="2",stateFunc1.addEventListener("mousedown",()=>{next(18,0)}),stateFunc2.style.zIndex="2",stateFunc2.addEventListener("mousedown",()=>{next(18,1)})},textDelay);break;case 19:window.setTimeout(()=>{text("now, click the other state function to substitute it.",instrX,getCoords(sym).bottom+2*lnHt),0==choices[2]?stateFunc2.addEventListener("mousedown",()=>{next(19,1)}):stateFunc1.addEventListener("mousedown",()=>{next(19,0)})},1.5*textDelay);break;case 20:endSolution=cylinder?"2 π r = 2 π r":`${"-"==motionText2[0]?"-"==motionText1[0]?" ":"-":" "}\\Big( \\frac{\\partial ${"-"==motionText2[0]||"+"==motionText2[0]?motionText2[1]:motionText2[0]}}{\\partial ${constant}} \\Big)_{\\scriptscriptstyle ${partials[1]} } = ${"-"==motionText1[0]?"-"==motionText2[0]?" ":"-":" "} \\Big( \\frac{\\partial ${"-"==motionText1[0]||"+"==motionText1[0]?motionText1[1]:motionText1[0]}}{\\partial ${partials[1]}} \\Big)_{\\scriptscriptstyle ${constant}}`,domObjs.push(new Tex({content:endSolution,position:[texX+1.5*lnHt,getCoords(sym).bottom+3*lnHt],name:"es"})),domObjs[domObjs.length-1].div.id("endSolution"),endSolutionDOMobj=document.getElementById("endSolution"),endSolutionDOMobj.style.fontSize=`${largeFontSize}rem`,endSolutionDOMobj.style.opacity="0",window.setTimeout(()=>{cylinder?(text("Simplifying the equation above,\nwe find equivalency!",instrX,getCoords(sym).bottom+lnHt),start=vDuration,vid.removeEventListener("timeupdate",function(){this.currentTime>=start+vDuration/4-.25&&this.pause()}),vid.currentTime=`${vDuration/2}`):text("The equation above simplifies to a Maxwell Relation!",instrX,getCoords(sym).bottom+1.25*lnHt),window.setTimeout(()=>{endSolutionDOMobj.style.transition=`all ${1/animSpeedMult}s`,endSolutionDOMobj.style.opacity="1",text("press the reset button to try another.",instrX,getCoords(endSolutionDOMobj).bottom+1.5*lnHt)},textDelay/2)},textDelay)}}function next(t,e){const s="π",o="²";let n;if(t==page)switch(page){case 1:let t;for(i=0;i<domObjs.length;i++){t=i!=e?"fade":"expand";let s=document.getElementById(`eq${i}`);effect.push({target:s,effect:t})}4==e?cylinder=!0:vidContainer.style.display="none",effects=!0,redraw(),update=!0,page++;break;case 2:for(choices.push(e),str=cylinder?"dV=Jdr+KdL":eqns.fundamentals[k[choices[0]]],constantIndex=coloredLetters[e],constant=str.charAt(constantIndex),partialsIndex=[0,1],partialsIndex.push(0==e?coloredLetters[1]-1:coloredLetters[0]-1),partialsIndex.push(0==e?coloredLetters[1]:coloredLetters[0]),n=str.charAt(partialsIndex[2]-1),m="J"==n?`2${s}rL`:"K"==n?`${s}r${o}`:n,rhs="-"==str.charAt(partialsIndex[2]-2)?`-${m}`:`${m}`,partials=[],i=0;i<partialsIndex.length;i++)partials.push(str[partialsIndex[2*i+1]]);update=!0,page++;break;case 3:effect=[],effects=!1,page++,drawPage(page);break;case 4:page++,drawPage(page);break;case 8:update=!0,cylinder&&(volumeTextDOMObj.style.display="none"),page++;break;case 10:for(constantIndex=coloredLetters[e],constant=str.charAt(constantIndex),partialsIndex=[],partialsIndex=[0,1],partialsIndex.push(0==e?coloredLetters[1]-1:coloredLetters[0]-1),partialsIndex.push(0==e?coloredLetters[1]:coloredLetters[0]),n=str.charAt(partialsIndex[2]-1),m="J"==n?`2${s}rL`:"K"==n?`${s}r${o}`:n,rhs="-"==str.charAt(partialsIndex[2]-2)?`-${m}`:`${m}`,partials=[],i=0;i<partialsIndex.length;i++)partials.push(str[partialsIndex[2*i+1]]);update=!0,page++;break;case 11:effect=[],effects=!1,page++,drawPage(page);break;case 12:page++,drawPage(page);break;case 16:update=!0,page++;break;case 18:update=!0,choices.push(e),replacePartials(e),page++;break;case 19:update=!0,replacePartials(e),page++}}function replacePartials(t){hidePartial1=[sym.firstChild.firstChild.childNodes[7],sym.firstChild.firstChild.childNodes[10],sym.firstChild.firstChild.childNodes[11],stateFunc1.firstChild.firstChild.childNodes[0],stateFunc1.firstChild.firstChild.childNodes[1]],hidePartial2=[sym.firstChild.firstChild.childNodes[0],sym.firstChild.firstChild.childNodes[3],sym.firstChild.firstChild.childNodes[4],stateFunc2.firstChild.firstChild.childNodes[0],stateFunc2.firstChild.firstChild.childNodes[1]],motionText1=selectItem(str,eqnLetterObjs,choices[1],!0),motionText2=selectItem(str,eqnLetterObjs,0==choices[1]?1:0,!0),cylinder?(showPartial1="0"==choices[1]?[stateFunc1.firstChild.firstChild.childNodes[2],stateFunc1.firstChild.firstChild.childNodes[3],stateFunc1.firstChild.firstChild.childNodes[4],stateFunc1.firstChild.firstChild.childNodes[5]]:[stateFunc1.firstChild.firstChild.childNodes[2],stateFunc1.firstChild.firstChild.childNodes[3],stateFunc1.firstChild.firstChild.childNodes[4]],showPartial2="1"==choices[1]?[stateFunc2.firstChild.firstChild.childNodes[2],stateFunc2.firstChild.firstChild.childNodes[3],stateFunc2.firstChild.firstChild.childNodes[4],stateFunc2.firstChild.firstChild.childNodes[5]]:[stateFunc2.firstChild.firstChild.childNodes[2],stateFunc2.firstChild.firstChild.childNodes[3],stateFunc2.firstChild.firstChild.childNodes[4]]):(showPartial1="-"==motionText1[0]?[stateFunc1.firstChild.firstChild.childNodes[2],stateFunc1.firstChild.firstChild.childNodes[3]]:[stateFunc1.firstChild.firstChild.childNodes[2]],showPartial2="-"==motionText2[0]?[stateFunc2.firstChild.firstChild.childNodes[2],stateFunc2.firstChild.firstChild.childNodes[3]]:[stateFunc2.firstChild.firstChild.childNodes[2]]);const e=cylinder?lnHt/2:0;if(0==t){hidePartial1.forEach(t=>{t.style.transition=`all ${2/animSpeedMult}s`,t.style.opacity="0"});for(let t=0;t<showPartial1.length;t++){let i=showPartial1[t];i.style.transition=`all ${2/animSpeedMult}s`,i.style.transform=`translate(\n                ${e+getCoords(hidePartial1[1]).left-(getCoords(showPartial1[0]).left+getCoords(showPartial1[showPartial1.length-1]).left)/2+.75*lnHt}px,\n                ${(getCoords(hidePartial1[0]).top+getCoords(hidePartial1[0]).bottom)/2-getCoords(showPartial1[0]).bottom+.5*lnHt}px\n                )`,cylinder&&(i.style.fontSize=`${.75*largeFontSize}rem`)}}else{hidePartial2.forEach(t=>{t.style.transition=`all ${2/animSpeedMult}s`,t.style.opacity="0"});for(let t=0;t<showPartial2.length;t++){let i=showPartial2[t];i.style.transition=`all ${2/animSpeedMult}s`;let s=`translate(\n                ${e+getCoords(hidePartial2[1]).left-(getCoords(showPartial2[0]).left+getCoords(showPartial2[showPartial2.length-1]).left)/2+.75*lnHt}px,\n                ${(getCoords(hidePartial2[0]).top+getCoords(hidePartial2[0]).bottom)/2-getCoords(showPartial2[0]).bottom+.5*lnHt}px\n                )`;i.style.transform=s,cylinder&&(i.style.fontSize=`${.75*largeFontSize}rem`)}}}function reset(){location.reload()}function resizeFont(){let t=Number(window.getComputedStyle(document.getElementById("main")).getPropertyValue("font-size").replace(/[^\d.-]/g,""));fontSize=100*w<400?t:100*w<1200?100*w/28:1200/28,textSize(fontSize),lnHt=1.5*textAscent(),instrX=5*w,instrY=lnHt+getCoords(document.getElementById("resetbutton")).bottom,texX=instrX,texY=instrY+lnHt,largeFontSize=2.2*fontSize/10}function windowResized(t){let e=windowWidth,i=windowHeight;if(dims=Math.min(e,i),w=dims/100,h=dims/100,resizeFont(),1==t)return dims;resizeCanvas(dims,dims),update=!0}function selectItem(t,e,i,s){let o=[],n=[];o=-1!=t.search("=-")?0==i?[3,7]:[7,11]:0==i?[3,6]:[6,10];for(let t=o[0];t<o[1];t++)n.push(e[t]);return s?t.slice(o[0],o[1]):n}function getCoords(t){let e=t.getBoundingClientRect();return{top:e.top+pageYOffset,left:e.left+pageXOffset,bottom:e.top+pageYOffset+e.height,right:e.left+pageXOffset+e.width,height:e.height,width:e.width}}let start,modsTimer,volumeText,volumeTextDOMObj,vTime,vDuration,txt,txt2,txt3,vid,stateFunc1,stateFunc2,sym,symmetryText,w,h,instrX,instrY,texX,texY,sWidth,lnHt,fontSize,largeFontSize,i,k,str,constant,constantIndex,partialsIndex,m,restart,topPartial1,topPartial2,bottomPartial1,bottomPartial2,constantText1,constantText2,refLeft,rhs,cnst,cnst2,cnst3,cnst4,s,symmetry,hidePartial1,hidePartial2,showPartial1,showPartial2,motionText1,motionText2,endSolution,endSolutionDOMobj,eqns={fundamentals:{U:"dU=TdS-PdV",A:"dA=-SdT-PdV",H:"dH=TdS+VdP",G:"dG=-SdT+VdP",C:"dV= \\left( \\frac{\\partial V}{\\partial r} \\right)_{\\scriptscriptstyle L} dr + \\left( \\frac{\\partial V}{\\partial L} \\right)_{\\scriptscriptstyle r} dL"}},choices=[],domObjs=[],page=1,update=!1,effects=!1,effect=[],eqnLetterObjs=[],coloredLetters=[],fps=30,partials=[],ctc=!1,animSpeedMult=1,textDelay=2e3/animSpeedMult,cylinder=!1,dims;