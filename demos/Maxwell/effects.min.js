function applyEffect(e){e.delete;let t=e.time||.5;for(i=0;i<e.length;i++){let n=e[i].target,r=e[i].effect,s=e[i].color||null,o="cnvElement"!=(e[i].type||"DOM");if(o)switch(r){case"fade":n.style.opacity="1",n.style.transition=`opacity ${t}s`,n.style.opacity="0";break;case"expand":n.style.fontSize=fontSize,n.style.transition="all 1s",n.firstChild.style.transition="all 1s",n.firstChild.style.fontSize=`${largeFontSize}rem`,n.style.top=`${texY+1.2*lnHt}px`;break;case"glow":glow({continuous:2==page,duration:2e3,element:n,id:Math.floor(i/2)});break;case"color":glow({continuous:!1,duration:1e3,element:n,id:s});break;case"zeroAndDelete":let e=[0,.5,1,1.5,2,2.5,3];var l=[.05,.05,.05,.05,.05,.05];if(running){if(running&&prg<e[1]){prg+=l[0];let t=e[1]-e[0];push(),strokeWeight(4),line(x1,y1,(1-prg/t)*x1+prg/t*x2,(1-prg/t)*y1+prg/t*y2),pop()}else if(running&&prg<e[2]){prg+=l[1];let t=e[2]-e[1];push(),noStroke(),fill(`rgba(0, 0, 0, ${(prg-e[1])/t})`),text("0",x2,y2-lnHt),pop()}else if(running&&prg<e[3])prg+=l[2];else if(running&&prg<e[4]){prg+=l[3];let t=e[4]-e[3],n=Object.keys(eqns.fundamentals),r=eqns.fundamentals[n[choices[0]]];selectItem(r,letters,choices[1]).forEach(function(l){l.style.opacity=`${(e[4]-prg)/t}`}),clear(),push(),noStroke(),fill(`rgba(0, 0, 0, ${Math.max((e[4]-prg)/t,0)})`),text("0",x2,y2-lnHt),stroke(`rgba(0, 0, 0, ${Math.max((e[4]-prg)/t,0)})`),strokeWeight(4),line(x1,y1,x2,y2),pop(),(e[4]-prg)/t<.05&&(selectItem(r,letters,choices[1]).forEach(function(e){e.style.visibility="hidden"}),clear())}else if(running&&prg<e[5]){if(prg<e[4]+l[4]){let t=e[5]-e[4],n=document.getElementById(`eq${choices[0]}`);n.style.transition=`all ${t/l[4]/fps}s`,n.style.top=`${texY}px`;let r=refLeft-getCoords(letters[2]).left,i=getCoords(letters[0]).left;n.style.left=`${i+r}px`}prg+=l[4]}else if(running&&prg<e[6]){prg+=l[5];let t=e[6]-e[5];if(1==choices[1]){let e=Object.keys(eqns.fundamentals),n=eqns.fundamentals[e[choices[0]]];xNew=getCoords(selectItem(n,letters,1)[0]).left,negativeQ="+"!=selectItem(n,letters,2,!0).charAt(0);let r=selectItem(n,letters,2);negativeQ||(r[0].style.visibility="hidden",r.shift()),xOrig=getCoords(r[0]).left,r.forEach(function(e){e.style.transition=`all ${t/l[5]/fps}s`,e.style.transform=`translateX(${xNew-xOrig}px)`})}prg=e[6]}else if(running&&prg>=e[6])return running=!1,prg=0,next(parseInt(`${page}`),null)}else{for(prg=0,x1=getCoords(n[0]).left,x2=getCoords(n[1]).right,y1=getCoords(n[0]).bottom+10+.5*lnHt,y2=getCoords(n[1]).top+10-.5*lnHt,running=!0,effects=!0,update=!1,i=0;i<domObjs.length;i++)domObjs[i].div.style("z-index","-1");loop()}}}}function glow({continuous:e,duration:t,element:l,id:n}){let r=Math.floor(t*fps/1e3),i=frameCount%r/r,s=e?.5+.5*Math.sin(i*Math.PI):1,o=0==n?[0,0,0]:1==n?[70,200,50]:2==n?[100,100,255]:[0,0,0],g=`rgb(${o[0]*s},${o[1]*s},${o[2]*s})`;l.style.color=g,e&&loop()}var glowList=[];let x1,x2,y1,y2,negativeQ,xOrig,xNew,running=!1,prg=0;